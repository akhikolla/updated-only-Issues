testlist <- list(rates = c(-2.70494424383608e-11, -2.70494424244937e-11,  -2.70494424244937e-11, -2.70494424244937e-11, 7.06683208934072e-304,  -Inf, NaN, 1.23411474800827e+182, NaN, NaN, 5.43223507567683e-312,  NaN, -1.34765572425519e+28, 6.47733882085731e-145, -9.52713064494326e+139,  1.36258221338603e-105, -1.34765550943381e+28, 4.73812995908318e+43,  -2.70493314160584e-11, NaN, 7.29032584869847e-304, 1.80331547217436e-130,  2.12196682636678e-314, 1.26217821871384e-27, NaN, 4.46014905249241e+43,  -2.74306263116906e+304, 9.12404584912149e+194, 2.77448001762435e+180,  Inf, 2.77448001762435e+180, 2.77448001762435e+180, 2.77448001762435e+180,  2.77448001762435e+180, -2.74306263440699e+304, 9.12404584912149e+194,  2.77448001762435e+180, 1.20089319277908e-178, -7.21018141782026e+304,  2.77448001762442e+180, 2.77448001762435e+180, 2.68176210458615e-29,  3.83698199462024e+117, 6.94947255553754e-309, 2.77448001764249e+180,  -5.35359615124229e+305, NA, 7.2903258603164e-304, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 1.61013452731574e-24,  1.23175343670293e+194, -1.36160598003672e+28, -1.34765550943381e+28,  6.20102779604429e-305, 1.91561942608236e+53, 9.49129894553818e+194,  0), thresholds = c(3.83677274890702e+117, 8.07538171686265e+115,  2.91240594961789e-144, 4.18998493012724e-144, 7.50871604544118e-308,  2.63554839664967e-82, 2.12196341187911e-314, 2.90435604895085e-144,  -3.42891577535994e+304, 3.8368721898241e+117, 3.78259285893079e+117,  2.17165531282319e+45, NaN, 2.77448001762435e+180, 2.77448001761692e+180,  2.77448001762435e+180, 4.1410356212496e+204, 4.1410356681522e+204,  4.1410356681522e+204, 4.1410356681522e+204, 4.1410356681522e+204,  4.1410356681522e+204, 4.1410356681522e+204, -7.2101814244246e+304,  2.77448001459322e+180, 2.77448001762435e+180, 2.77448001762435e+180,  9.52157095844336e-307, 2.77448001676702e+180, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, 1.390671161567e-309, -1.92537522473369e+183,  7.28399830647822e-304, 1.5019240163966e-307, 1.08618507381958e-306,  1.36276004428566e-105, 2.71663823569962e-311, 1.39067116156574e-309,  2.78134232502494e-307, 4.16348356759272e+202, 2.77448001771535e+180,  2.77448001762435e+180, -1.72227260337227e-93, 1.39124676429592e-316,  1.39065209773244e-309, 3.20762789152191e-211, 2.84132113906601e-173,  2.84132113906601e-173, 4.79031896568503e-109, 1.75980614900606e-130,  1.80331613616957e-130, 4.46015329317765e+43, 3.83698282132418e+117,  NaN, NaN, -3.53607015069902e-93, 3.56159180157686e-314, 7.29032242438082e-304,  1.60266322567036e-24, 2.84132113906601e-173, 2.84132113906601e-173,  1.34275506324855e+241, -7.22669353876649e+304, 5.43157195199216e-312,  5.43223507585964e-312, 3.83698439012239e+117, 7.18520929158341e-304,  1.50192485449233e-307, -5.3172514347146e+305, 9.94684568527618e-316,  5.12272806694661e+120, 1.44632716009107e-307, NaN, -2.74306263117642e+304,  1.66880379407532e-308, 1.38926515211963e-309, 1.80331613627316e-130,  2.12196682636678e-314, 1.26217821871384e-27), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)