testlist <- list(rates = c(-9.77719780333789e-292, NaN, NaN, -9.77719780327796e-292,  -9.77719780333789e-292, -9.77719780333789e-292, 2.93954071158394e-306,  6.9881578015912e-310, NaN, -2.30331110816477e-156, -2.30331110816477e-156,  -2.30331110816272e-156, -5.5516993870748e+306, 4.65661286890991e-10,  NaN, -9.77719780333789e-292, -9.77817400064824e-150, NaN, -4.57615391491265e-246,  2.71615461306795e-312, -4.38889926233518e+306, 4.5113879864095e-10,  NaN, NaN, -9.77817400064824e-150, 7.2903536873204e-304, NaN,  NaN, -5.48612930076931e+303, -7.36331510668791e+303, NaN, NaN,  NaN, 5.43230922486616e-312, -9.77720152105024e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -8.81442988331701e-280, -8.18300487900495e-171,  3.78576699573381e-270, -1.26836459270033e-30, -1.24351955275956e-30,  -1.26836459270829e-30, 5.20542961913381e-270, 4.00791842552789e-306,  2.34012289634757e-269, 2.73154948385661e-312, -4.18023207308323e+304,  6.66135840747845e+286, 1.29145347579917e-231, 2.9548964544048e-306,  -2.15995026127394e-277, -5.69758255001719e-306, -7.3933031226567e-287,  NaN, 2.56647495437459e-301, -2.18103493600849e-289, 8.2889857824493e-317,  0, 0, 0, -5.48612407015086e+303, 2.96439387504748e-323, NaN,  5.42203113091213e-312, 3.652182918573e-306, 7.41606077195122e-310,  -9.77580118946814e-150, 5.74181509249131e+199, 1.59481378213659e-313,  8.28904605845809e-317, 0), thresholds = c(-7.12492061902948e-277,  -4.27803982342683e-317, 6.96630039717503e-310, 8.53111842806076e-85,  1.91777968406795e+289, 1.425439003045e-308, NaN, -3.07840260097373e-288,  NaN, NaN, NaN, -2.27610495947272e-159, 2.01890044860109e-319,  0, 1.12583467900516e-305, 9.70418614810987e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, NaN, NaN, NaN, NaN, -2.27610496386189e-159,  -2.30331110816477e-156, -2.30331110816477e-156, NaN, -5.46299574661044e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.35044484234063e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, 1.38540861198517e-309, NaN,  NaN, NaN, 1.390671161567e-309, NaN, -9.7771978178602e-292, -9.77719780333789e-292,  -9.77719780333789e-292), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)