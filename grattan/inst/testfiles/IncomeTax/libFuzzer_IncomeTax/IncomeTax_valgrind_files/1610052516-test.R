testlist <- list(rates = c(7.07039469194368e-304, NaN, NaN), thresholds = c(-9.77579998268762e-150,  -3.17985383367276e-161, 9.69630018960263e+192, 4.02153320811099e-87,  9.50582302598558e-321, 0, 0, -5.48635427707819e+303, 2.96439387504748e-323,  NaN, 5.42203113091213e-312, 2.393494597516e-301, -2.30331110816298e-156,  -2.30327665540415e-156, -2.30331110816477e-156, -2.29573572656691e-156,  -5.5516993870748e+306, -1.21044017903676e-305, -1.84912323760304e-248,  2.40313001605884e-306, 7.2911220195564e-304, 0, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 3.94108708470682e-312,  2.71598149218577e-306, 1.64816262214147e-307, -1.26836459270228e-30,  5.85363614692621e+170, 2.80103704451952e-312, -9.77814561099348e-292,  9.82745041327995e-101, 2.81218450766349e-312, 8.2863938883057e-312,  2.9621337120295e-306, -2.2962031506993e-156, -2.30331110816477e-156,  -2.30331110816477e-156, NaN, -5.32245148160694e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -1.46889178304203e-110, 0), x = c(-Inf, -7.3932969133387e-287,  NaN, -7.3932969133387e-287, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)