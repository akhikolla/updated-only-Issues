testlist <- list(rates = c(3.65746515494203e-306, 1.01955734498014e-314,  2.12199579096527e-314, -5.48612406879369e+303, NaN, 7.00767890008367e-310,  2.72974914124656e-312, -2.30331099970595e-156, -5.77662199871671e-275,  1.00053821907193e-267, -2.43593029637101e-306, 1.09015244729545e+217,  -3.0784026009623e-288, NaN, NaN, -5.96890832411666e+306, 1.390652843099e-309,  -5.16216864106284e-306, -8.81442986644817e-280, 6.95356800417634e-310,  -3.07800257785878e-288, NaN, NaN, -5.96890832411666e+306, -5.82900230650667e+303,  NaN, NaN, NaN, NaN, -1.34497461654424e-284, -8.81442988493713e-280,  -2.64494692448922e+154, 2.29775642758308e+189, -1.48603602467489e-267,  -5.48681743872625e+303, -3.65398847701729e-306, 3.83677401710034e+117,  NaN, 0, 0, -3.01363922187462e-135, -1.12858219058046e-276, -2.30331110816477e-156,  -2.30331110816477e-156, -2.30327665540415e-156, 6.98722785359005e-310,  2.72974914124656e-312, -2.30331099970595e-156, -2.30331110816477e-156,  -2.29827868269894e-185, 6.95356800417634e-310, -2.82149765199838e-277,  3.41641322410626e-312, 1.08601191821704e-306, -7.96293296507238e+304,  -5.96890832411666e+306, NA, -5.16216864106284e-306, -8.81442986644817e-280,  -1.85907762421774e-183, -3.07800257785878e-288, NaN, NaN, -5.96890832411666e+306,  -5.82900230650667e+303, NaN, NaN, NaN, 9.70418706723041e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706674546e-101,  3.83687416993436e+117, -8.81442989027058e-280, 2.56647495437793e-301,  -2.30331110816311e-156, 2.72938588030555e-312, 0), thresholds = c(2.87903833031139e-306,  2.81741340991653e+118, -5.49084600862143e+303, -4.14464901596874e-317,  6.985949166613e-310, -5.39312642324298e-116, -8.22918610319022e+303,  7.29112073792399e-304, 7.3847178637027e-15, -2.0830942363192e-289,  1.29450049243368e-312, NaN, NaN, 1.25986739689518e-321, 0, -2.20216447763336e-289,  7.57771153258705e-304, -6.56725888219402e-287, -1.26437225774116e-30,  3.94108708470682e-312, -1.26822486837899e-30, NaN, NaN, NaN,  NaN, -1.05658906227133e+270, 3.23785921002061e-319, -2.24767481575006e-289,  1.43087066930861e-307, -1.26836459270826e-30, 1.43026673502722e-316,  -1.26823091051179e-30, 9.14021444806306e-322, -8.81442566340249e-280,  8.23342655940584e-312, -2.30331110545783e-156, -2.30331110816477e-156,  -2.30331110763906e-156, -2.30331110816477e-156, NaN, NaN, NaN,  1.3854086120054e-309, NaN, NaN, 6.95335580946088e-310, -2.87285026134096e-188,  -5.66362677157793e+303, NaN, NaN, 1.3854086120054e-309, NaN,  NaN, NaN, 5.43230922486616e-312, 2.12199579047121e-314, 1.53347352081475e-314,  -3.97083461829737e-34, -1.26836459270827e-30, -2.0562923949346e-289,  6.13389408325899e-315, 2.63554948579778e-82, 0, 2.3641409746639e-308,  1.48456814906984e-313, 2.84844220667961e-306, 2.84809454444288e-306,  6.9881578015912e-310, -2.30328334270592e-156, -2.30331110816477e-156,  -2.30331110816477e-156, -2.30331110816272e-156, -5.5516993870748e+306,  4.65661286890991e-10, NaN, NaN, -9.77817400064824e-150, 7.2903536873204e-304,  -4.57615391491265e-246, 2.71615461306795e-312, -4.38889926233518e+306,  4.5113879864095e-10, NaN, NaN, -9.77817400064824e-150, 7.2903536873204e-304,  NaN, NaN, -5.48612930076931e+303, -2.69092032885693e+305), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)