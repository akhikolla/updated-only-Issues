testlist <- list(rates = c(-5.77662200276729e-275, -2.35322190564442e-185,  -2.35343736826454e-185, 1.94906373601242e+289, -3.01363922187462e-135,  -1.12858219058046e-276, -2.30331110816477e-156), thresholds = c(NA,  -1.26841746137343e-30, -8.81442566349554e-280, -3.60585388336262e-33,  3.66343140688495e-305, 3.56055012740629e-306, -1.25162853511758e+306,  1.3854086120054e-309, NaN, NaN, NaN, 5.43230922486616e-312, -1.26836479922652e-30,  -3.99158421807315e-33, 9.70418706716146e-101, NaN, 9.70418706716128e-101,  -1.97671907332562e+306, NaN, NaN, 4.77830841839305e-299, NA,  -5.21531605337707e+73, NaN, NaN, -1.42447098956418e-305, -8.24519868127501e-157,  -2.30331110816477e-156, -2.30331110816477e-156, -5.55169906269231e+306,  3.91612999631911e-306, -8.98798625795533e+307, -6.69969684636837e-287,  -5.46354689855355e-108, -5.46354690059085e-108, 1.60559212927429e-146,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, 1.82724810416579e-305,  NaN, -8.22918577619206e+303, 4.46108959687689e-140, 3.42882753485303e+304,  NaN, NaN, NaN, 3.78320825121918e+117, 9.36335297153874e-97, 6.95356800417634e-310,  3.66343140074358e-305, -1.26836459270251e-30, 3.66148293307183e-314,  -8.81442592686244e-280, 1.23269447171475e-30, -1.26836407088752e-30,  -1.26836459270829e-30, 2.11057945361079e-309, 0, 9.23492568228087e-311,  NaN, -3.67243182468058e-306, 1.81346311408636e+286, -2.11940804072448e-289,  -5.41494189803772e-312, -1.84912323760304e-248, 2.40313001605884e-306,  -9.11307071058342e-306, 1.38990724308225e-312, 1.59481413420777e-313,  -Inf, 0), x = c(2.47192511527762e-94, -5.0818933387125e-306,  5.84082107600821e-308, 6.06584682809914e-301, 8.90029545119302e-308,  -6.64550663505903e-287, -2.34568207499818e-185, 3.65365168445541e-306,  5.85363594144907e+170, 5.85363771868791e+170, 3.75990818875158e+175,  NaN, NaN, NaN, NaN, -7.40367656369217e-171, 7.51897652547993e-304,  -2.97578962378101e-288, -2.35343736513769e-185, -9.77580118946814e-150,  5.74181509249131e+199, -2.11852534547717e-289, -5.34349793087392e-187,  -1.36890628484029e-231, NaN, 7.73071190387239e-12, 1.21044017902795e-305,  7.19919234034436e-310, 1.390671161567e-309, 0, 0, 0, 9.72926582174422e-309,  2.4722268685531e-94, 6.32404026676796e-322, 8.90029543402881e-306,  0, 2.31407681284749e-306, 33554432.062793, -1.67107823392885e-319 ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)