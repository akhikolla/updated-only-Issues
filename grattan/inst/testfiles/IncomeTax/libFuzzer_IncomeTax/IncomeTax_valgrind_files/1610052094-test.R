testlist <- list(rates = c(7.14161813362663e-304, NaN, 7.2911220195564e-304,  NA, 2.71628105277197e-312, 0), thresholds = c(-1.2683642165418e-30,  2.39958945525286e-309, 5.68604456976406e-270, -8.81443176193936e-280,  3.41641371420455e-312, NaN, 3.56048348188083e-306, 34082834.0004893,  NaN, 2.80614289249855e-312, -2.2308331518689e-289, 1.67616711008101e-319,  0, 0, 9.72926582174422e-309, 2.84809453888922e-306, 2.84347436052587e-312,  2.47222686857108e-94, 3.5601616320854e-306, 8.90029544463878e-306,  0, 2.31407681284749e-306, 33554432.062793, 1.84870553760557e-272,  2.30127027877264e-12, 3.652069863913e-306, NaN, 8.28904161186728e-317,  0, 0, 0, 9.70418706716122e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, -5.82789329454073e+303,  -5.82900681339507e+303, -4.27353247949539e-306, 2.87903833031139e-306,  -7.92736885289052e-308, -6.36358120662016e+305, -6.64678428260241e-287,  NaN, -1.12858219058046e-276, -2.25789611982447e-156, -2.30331110816477e-156,  -2.30327665540415e-156, -2.30331110816477e-156, NaN, 2.81199605989981e-312,  NaN, -5.97027451786473e+306, 1.390652843099e-309, NaN, NaN, NaN,  NaN, NaN, NaN, -1.26836479922652e-30, -3.10267783351777e-277,  -1.24255658710767e-30, 1.00891829368586e-309, 2.80103704451952e-312,  NaN, 3.78576699573368e-270, 7.29112072938316e-304, -3.04032340824977e-288,  8.35870150851893e-77, 2.71615482702308e-312, 2.00877703195536e-139,  2.00877667922349e-139, -4.18002442595755e+304, -2.38677000418437e-253 ), x = c(NaN, -1.26836459057627e-30, 4.00791842552789e-306, -1.26826829408472e-30,  2.40086640681612e-300, 5.67865049360052e-270, 3.94108708383232e-312,  -1.26826700255062e-30, -Inf, 1.11579631478852e-308, -2.11966640218428e-289,  Inf, -1.26836459270829e-30, -2.11740529227575e-289, 3.56047671159453e-306,  -8.02506476812756e+304, 1.390652843099e-309, -5.16216864106284e-306,  -8.81442986644817e-280, -1.85907762421774e-183, -9.77580118946814e-150,  -2.97619079749159e-288, -3.01406960140899e-135, NaN, 2.1788294981599e-321,  -1.26836459066847e-30, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)