testlist <- list(rates = c(1.88100416372243e-35, 5.68604456976406e-270, 5.5869437297374e-319,  -2.247674815751e-289, NaN, -1.26836459270033e-30, 3.66343140688495e-305,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, -7.2911220195564e-304, 2.64121103063769e-301,  NaN, 1.96568260790928e-236, -3.85254213647597e-34, 3.56048353890995e-306,  -1.26836459270251e-30, 3.66148293307183e-314, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, -1.26275749313693e-30, 3.66343140688495e-305,  -1.26836459270251e-30, 3.66148293307183e-314, 7.20267544264522e-304,  2.71502979554261e-307, 2.36822369884747e-308, 1.48456814906984e-313,  2.84844220667961e-306, -2.05226840465102e-289, 2.87903833578224e-306,  2.80103962472795e-312, 3.24665356080927e-312, 0, -2.29844981641981e-185,  2.56647495091096e-301, 1.00498814831209e-309, -2.97578918250622e-288,  NaN, -1.24357335371015e-30, 3.66343140686196e-305, 3.02540651798698e-306,  6.9881578015912e-310, -2.30328334270592e-156, -2.30331110816477e-156,  -1.26836459240866e-30, -5.45519795972809e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, NaN, NaN, NaN, NaN, NaN, Inf,  NaN, 3.65207087186091e-306, -7.29112201950335e-304, 3.83677401710034e+117,  NaN, -1.06567983545374e-314, 6.95346190762455e-310, -6.05898824717554e-65,  -2.25769487008466e-289, 3.65207086127239e-306, NaN, 7.00767890008367e-310,  -4.93185008443201e-31, 0), thresholds = c(-9.77719780333789e-292,  NaN, 2.87903697225393e-306, -7.39330192498285e-287, NaN, 6.95335622396347e-310,  NaN, NaN), x = NA_real_)
result <- do.call(grattan::IncomeTax,testlist)
str(result)