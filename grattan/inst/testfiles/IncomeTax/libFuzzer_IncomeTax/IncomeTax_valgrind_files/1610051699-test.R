testlist <- list(rates = c(-1.26836459270829e-30, 2.87903833031139e-306,  2.84347435989346e-312, NaN, 2.71598149214445e-306, -1.26836459270255e-30,  3.66148293307183e-314, -5.83518345963498e-34, -8.81443176184667e-280,  -2.18070808433259e-289, NaN, 3.56048348188083e-306, 34082834.0004893,  NaN, 2.80614289249855e-312, -2.2308331518689e-289, 512.000000003857,  4.46108959078265e-140, 3.60297094497336e-306, -1.26836459057627e-30,  2.73735181609753e-312, -8.81442988748469e-280, -2.3033111077411e-156,  -2.30331110816477e-156, -1.12583501772562e-305, -3.0784025986712e-288,  -5.46354689218091e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  0), thresholds = c(-2.30331110816477e-156, 5.84082107599125e-308,  2.81199605989981e-312, NaN, -5.97027451786473e+306, 1.390652843099e-309,  -2.87284972534152e-188, -2.35343736826454e-185, Inf, -2.35343736826454e-185,  -8.11440247739634e-289, -Inf), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)