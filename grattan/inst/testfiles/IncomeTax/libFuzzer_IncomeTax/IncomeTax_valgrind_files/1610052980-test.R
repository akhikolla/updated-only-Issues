testlist <- list(rates = c(NaN, NA, NaN, NaN, NaN, NaN, NaN, 8.62433412540535e-308,  -2.35343736826449e-185, -2.32219514245902e-185, -2.36696135798216e-185,  9.1139025244455e-306, NaN, 3.66343140689406e-305, -2.11967030492847e-289,  -1.26836419890938e-30, 3.78576961503532e-270, 2.8925960194786e-307,  2.95489786551071e-306, 2.39957410182667e-309, 5.68604456976406e-270,  -1.26836459270829e-30, 1.11076451584089e-314, -Inf, 7.31409635508346e-310,  NaN, 2.96439387504748e-323, NaN, NaN, NaN, NaN, NaN, 2.71598149218577e-306,  2.97723608045931e-306, 6.9881578015912e-310, -2.30328334270592e-156,  -2.30331110816477e-156, -2.30331110816477e-156, -2.30331110816272e-156,  -5.5516993870748e+306, 4.65661286890991e-10, NaN, NaN, -9.77817400064824e-150,  7.2903536873204e-304, -4.57615391491265e-246, 2.71615461306795e-312,  -4.38889926233518e+306, 4.5113879864095e-10, NaN, NaN, -9.77817400064824e-150,  0), thresholds = c(NaN, 7.29112072938316e-304, NaN, NaN, NaN,  NaN, NaN, 3.65365169506531e-306, 9.70418706716122e-101, 9.7041598162183e-101,  9.70418706715543e-101, 9.70418614810987e-101, -Inf, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706674546e-101,  3.83687416993436e+117, 3.78350645974375e+117, 0), x = c(1.72723371101889e-77,  0, 0, 3.60739357822963e-313, 2.26527122355628e-318, 8.54602158179859e+194,  NaN, 2.81199605863994e-312, NaN, -8.22918610319053e+303, 4.46108959687689e-140,  -1.40444775900542e+306, NaN, 7.2911220195564e-304, -2.49849450679776e-127,  -2.49833539069496e-127, 2.5664749543781e-301, -3.01363922187472e-135,  -2.30331110816476e-156, -2.30331110816477e-156, -2.29449120144681e-156,  -2.30331110816477e-156, -1.84314079543842e+306, 7.1987099133561e-310,  NaN, 3.78576699573368e-270, 7.29112072938316e-304, -3.04032340824977e-288,  2.72784216611317e-312, 2.64868533186271e-305, -2.82149851225675e-277 ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)