testlist <- list(rates = c(-8.4053447558216e+241, 4.31748794097067e-304,  -5.06342347231031e+245, NaN, 3.2848203123151e-299, NaN, 7.2911220195564e-304,  NaN, NaN, 2.16443570677964e-312, NaN, 1.63335743792007e+40, -1.28383608780517e+116,  3.24259741596867e+178), thresholds = c(5.15536798577386e-312,  5.15536798577386e-312, NaN, NaN, NaN, NaN, -5.1071114359872e+245,  -5.54792475454324e+243, NaN, 5.54095540936847e-310, -1.1255454651159e-256,  5.15536798577386e-312, 2.78134232318839e-309, -3.45507950618034e+304,  3.64556100396923e-304, -1.18297538621888e-125, -8.52438965094796e+245,  9.87239057337792e-55, 7.2911220195564e-304, -2.83637103416294e-124,  1.71272844748826e-260, 1.4287342045003e-101, NaN, NaN, NaN, -1.64264596305683e-260,  NaN, 9.79032497743168e-307, -3.14666901810749e+53, NaN, 4.77830972972642e-299,  4.90506654460551e-10, NaN, 1.02084759352235e+40, 3.37838543680881e+256,  NaN, NaN, -5.06443593278922e+245, -5.17538999909498e+245, -6.31008200917246e-256,  NaN, NaN, -3.11334924788786e+53, 1.0547424349445e+40, 5.22277776582315e-10,  1.08646184497373e-311, 3.91910664852576e+202, 8.09307924505602e+175,  7.49779509808956e+247, -7.72446355494746e+306, 9.58685070020329e-307,  2.71863809332078e-109, 3.78066575556085e+228, 5.43722619646479e-109,  -6.30934745130473e-256, 8.81528262590534e-280, 6.80604974142528e+38,  2.42722772089937e-315, 3.92660099062145e-310, NaN, 0), x = Inf)
result <- do.call(grattan::IncomeTax,testlist)
str(result)