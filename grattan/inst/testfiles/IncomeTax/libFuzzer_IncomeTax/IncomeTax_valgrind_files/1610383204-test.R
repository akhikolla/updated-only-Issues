testlist <- list(rates = c(NaN, 5.43230922486616e-312, NaN, NaN, NaN, NaN,  NaN, NaN, -5.82900682309329e+303, NaN, NaN, -3.29167444127621e+305,  NaN, 9.3631892934666e-307, 5.49986305930905e-310, -1.1255454651159e-256,  3.6806986859005e+180, 1.71721740627347e+262, 4.87620583420803e-153,  9.34531020883862e-307, 4.7702837785253e-299, 9.12483869903286e-313,  NaN, NaN, -5.17538835488245e+245, NaN, NaN, -5.10711143681407e+245,  NaN, 1.31756732478297e-309), thresholds = c(2.08835233224397e-53,  NaN, 3.48360910473713e-307, 1.73368707488365e+117, -8.73989570995536e+245,  NA, 1.06281850367241e-316, NaN, 0), x = c(NaN, NA, NaN, 6.60774410574276e-304,  3.20876125492599e-294, -3.07268513826713e+54, NaN, NaN, NaN,  6.64032995703601e-07, 1.39113490711204e-308, 2.33589462449573e-310,  2.70150095835327e-307, NaN, 5.43230922486616e-312, NaN, NaN,  NaN, NaN, NaN, 1.39065593335898e-309, NaN, NaN, 2.16443570677964e-312,  -1.45094702117037e+128, 2.78132881200157e-309, 1.08646184499546e-311,  7.29112200597562e-304, 9.34561094558372e-307, 1.08729903862711e-311,  2.33589462432972e-310, NaN, NaN, -5.75028662029127e+243, Inf,  NaN, NaN, NaN, NaN, NaN, NaN, -5.48633958130682e+303, -5.18847371542227e+245,  -1.33373254766568e+241, 5.13920855130336e-315, NaN, NaN, NaN,  1.390671161567e-309, NaN, NaN, NaN, NaN, NaN, NaN, 2.23764539047744e-310,  NaN, NaN, NaN, NaN, 2.57461749641602e-310, 1.04291228629305e+40,  NaN, -1.29209058969159e+241, 1.16693466393965e-236, 5.53818599550706e-310,  1.96867192256984e-302, NaN, -4.95668081957698e+245, 3.32734326639184e-111,  NaN, NaN, NaN, 2.33589462432972e-310, -2.83637110188085e-124,  NaN, 1.02084759352235e+40, -4.93751584743096e+304, NaN, -4.19867256683219e-140,  -5.17538999909499e+245, 2.17660227867882e-106, -2.65503614631658e-260,  9.34531020883862e-307, NaN, -5.10711143681407e+245, NaN, 1.31756732478297e-309,  NA, 3.94213052632565e-259, 1.97498519159721e+166, -2.83637103417384e-124,  -2.39536098026912e+260, 4.89613425858066e-299, 1.09572122103091e+74,  4.77830972972651e-299, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)