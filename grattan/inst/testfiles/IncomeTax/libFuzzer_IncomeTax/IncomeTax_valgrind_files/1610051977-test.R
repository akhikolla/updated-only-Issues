testlist <- list(rates = c(2.39958945525286e-309, NaN, -8.81443176193936e-280,  2.93758957350627e-306, -2.2962031506993e-156, -2.30331110816477e-156,  -2.30331110816477e-156, -2.30331110763906e-156, -2.30331110816477e-156,  1.23269034419145e-30, -3.01406959776519e-135, -8.47794417983927e+303,  7.334923554234e-270, 3.56011975004636e-305, -3.9759940224262e-34,  -1.26836459270827e-30, 1.43026673502722e-316, -1.26823091051179e-30,  -4.02651530039782e-34, -1.26836459270827e-30, 1.43026673502722e-316,  -Inf, -4.76141191297597e-33, -1.26836459066993e-30, -1.26836459270829e-30,  NaN, NaN, 7.73071190387239e-12, NaN, NaN, 1.25986739689518e-321,  Inf, 0, 1.42873423910284e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 2.71973287984693e-312, -1.26418156348545e-30,  NaN, -1.23414719310911e-30, 2.56680426183462e-301, -4.9540049074147e-33,  -1.26836459270829e-30, 2.1788294981599e-321, Inf, -4.76141252969079e-33,  -1.26836459270829e-30, 8.81442566340335e-280, -2.82145547645109e-277,  1.67129192517088e-112, -1.26836459270826e-30, 1.00891829368586e-309,  9.70418618042075e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, -1.97671907332562e+306,  NaN, NaN, NaN, 1.09843596040623e-314, -5.48612677708818e+303,  6.98064467343362e-310, 0), thresholds = c(NaN, 7.2903536873204e-304,  -4.57615391491265e-246, -9.77579639961615e-150, -9.77719780333789e-292,  -9.77719780333789e-292, 2.72705584571209e-312, -6.7638476395025e-231,  -6.56793027847815e-287, 1.38999208669611e-309, 2.393494597516e-301,  1.38813608392365e-309, -Inf, NaN, NaN, 1.390671161567e-309, NaN,  -5.46354690487052e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, -9.7781740006482e-150, NaN,  7.29113008653559e-304, 1.21058385087498e-305, Inf, NaN, -2.2943632577183e-156,  -1.12583501772562e-305, -2.30331110816477e-156, -6.36358120662016e+305,  -7.37173493749211e-157, -2.30331097358367e-156, -2.30331110816477e-156,  -7.2906943803758e-304, 2.87903833031139e-306, -7.92736885289052e-308,  6.01362129181413e-317, -1.26836459057627e-30, 4.00791842552789e-306,  -1.26826829408472e-30, 2.40086640681612e-300, 5.67865049360052e-270,  3.94108708383232e-312, NaN, NaN, 7.29069786490517e-304, 0, 0,  0, -2.30331099692468e-156, -2.30331110816477e-156, 2.11860490852936e-309,  2.36643149187119e-307, -5.46354474765123e-108, -5.46354690059085e-108,  -5.46354690059085e-108, 8.63073241202178e+115, -2.82116926034698e-277,  6.98403937286746e-310, -3.43048522268702e-111, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  NaN, NaN, -9.7781740006482e-150, 7.2903536873204e-304, NaN, NaN,  5.43230922486616e-312, NaN, -9.21253817449874e-280, 1.23269447171475e-30,  -1.26836459270829e-30, 5.5869437297374e-319, -1.26836407051221e-30,  1.88100416372243e-35, 1.25819326108004e-60, -5.66365833706557e+303,  5.43230922486616e-312, -3.9759940224262e-34, -1.26823100659151e-30,  -1.26836459270829e-30, 2.39422219319154e-301, -2.87284834993229e-188,  -2.35322190464904e-185, -5.77729739522216e-275, 7.31960296499841e-304,  NaN, 0), x = c(3.56047671159453e-306, -8.02506476812756e+304,  1.390652843099e-309, 4.28183424758689e-317, -7.39330388852429e-287,  0, 0, 2.3641409746639e-308, 1.48456814906984e-313, -2.84844220667961e-306,  -8.24519868127501e-157, -2.30331110816477e-156, -2.30331110816477e-156,  -2.30331097358367e-156, -2.30331110816477e-156, NaN, 2.84347436115333e-312,  2.47222686857108e-94, 3.5601616320854e-306, 8.90029544463878e-306,  0, 2.31407681284749e-306, -1.29445907199066e-312, -2.11852534546502e-289,  -3.07840103521725e-288, NaN, NaN, -5.07582396074448e-299, 8.162693638729e-312,  -9.77703631229251e-150, -2.60644259842206e+304, 7.18372580480888e-310,  NaN, -2.82171788099926e-277, 3.41641322410626e-312, 9.69634048887473e+192,  NaN, NaN, -5.48612930076931e+303, NaN, -2.30331110817115e-156,  -2.30331110763906e-156, -2.30331110816477e-156, NaN, NaN, NaN,  NaN, -1.79747454709516e+308, -9.77580118946814e-150, -2.30171621349352e-286,  -2.10457917502487e-289, NaN, 7.2911220195564e-304, NaN, -2.30341821898639e-156,  -2.29449120144681e-156, -2.30331110816477e-156, -1.84314079543842e+306 ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)