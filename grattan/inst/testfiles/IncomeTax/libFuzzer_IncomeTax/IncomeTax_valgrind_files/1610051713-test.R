testlist <- list(rates = c(-2.9718420926367e-147, 7.52609340439459e-304,  NaN, -9.77818300079457e-150, -9.77579636327222e-150, -2.23083509972902e-289,  1.67616711008101e-319, 0, 0, 9.72926582174422e-309, 2.84809453888922e-306,  2.84347436052587e-312, 2.47222686857108e-94, 3.5601616320854e-306,  8.90029544463878e-306, 0, -1.14111380630909e+306, 6.985949169073e-310,  -2.97578918250622e-288, NaN, 7.19865872045558e-310, -6.05301950308561e-157,  7.37827237216662e-301, -3.89790094419408e-31, 3.78576699573368e-270,  1.00891829346111e-309, 1.38527101433411e-309, -8.81442566346662e-280,  -2.30331110816477e-156, -2.30331110816477e-156, -2.30327665540415e-156,  -2.30331110816477e-156, 2.56647495592567e-301, 6.95335640686727e-310,  -2.30328334270592e-156, -2.30331110816477e-156, -2.30331110816477e-156,  -2.30331110816272e-156, -5.5516993870748e+306, 4.65661286890991e-10,  5.43230939247793e-312, -1.00914053742587e-149, 7.74546126861323e-304,  -8.8144298992236e-280, 2.56647495437793e-301, -2.30331110816311e-156,  3.7835305088198e+117, 4.00791700745219e-306, -6.64678428257374e-287,  -5.463546900558e-108, -5.46354690059085e-108, -5.46354690059085e-108 ), thresholds = c(-9.77818300079457e-150, 3.78987813636309e-312,  3.65365169083783e-306, -9.77818300079457e-150, 7.14190420369699e-304,  5.43226988934558e-312, 0, 0, 0, 3.60739284464096e-313, 2.84809453917917e-306,  -5.48612677708843e+303, 2.72888655986149e-312, 3.66145950596111e-314,  -1.2341419504043e-30, -1.80650535611164e+307, -9.7757963632732e-150,  2.73729184714066e-312, NaN, 3.94108708470682e-312, NA, -2.24767481577173e-289,  NaN), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)