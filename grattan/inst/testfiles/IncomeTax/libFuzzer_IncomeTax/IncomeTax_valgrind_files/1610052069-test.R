testlist <- list(rates = c(Inf, NA, Inf), thresholds = c(8.6209323240621e-315,  5.6715451854965e-310, -571406088.004036, -595821443.513725, -595821443.513725,  -595821443.513725, -595821443.513725, -595821443.513725, 1.05254719287228e-309,  -1.26823091051179e-30, 7.22857562968275e-304, 7.73070496507011e-12,  -8.81442989915646e-280, -1.26834825275039e-30, 1.53948714210656e-314,  -1.26836404691013e-30, -2.82145547645118e-277, -1.2437121450743e-30,  2.85332043096215e-306, -7.92736885289052e-308, 1.38540861198517e-309,  NaN, NaN, NaN, 1.390671161567e-309, NaN, -5.46354517907007e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, 1.42873492390385e-101, -1.26834825275039e-30,  NaN, -1.26823093099111e-30, -2.24767623012983e-289, -1.24371214513728e-30,  -1.26836459270829e-30, 3.78576699573368e-270, -1.26836459270033e-30,  -1.24351955275956e-30, -1.26836459270829e-30, 5.20542961913381e-270,  4.00791842552789e-306, 2.34012289634757e-269, -1.26836459270829e-30,  3.94108708470682e-312, -5.46354689225604e-108, -5.46354690059085e-108,  -2.84809454422167e-306, -8.69169477600504e-311, 3.78573810910268e-270,  7.29112072938316e-304, 3.32652954498878e-111, NaN, NaN, NaN,  -1.49693900625287e-110, -5.46354690059085e-108, -5.46354690059085e-108 ), x = c(7.19919233909423e-310, 5.85363771174557e+170, 5.85363771868791e+170 ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)