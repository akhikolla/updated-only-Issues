testlist <- list(rates = c(NaN, NaN, NaN, -2.96164702290324e-277, NaN, -8.81442988344703e-280,  7.74565138159227e-304, 2.12198042552369e-314, 0, 2.71615461243555e-312,  7.14190420369699e-304, 2.72505724091204e-312, 2.71615461306795e-312,  -2.30331110816473e-156, -1.12583501772562e-305, -2.30331110816477e-156,  -6.36358120662016e+305, -6.64678428260241e-287, NaN, NaN, -1.12850385925865e-276,  -1.26836459270732e-30, NaN, 1.00891829346114e-309, -2.11966640218436e-289,  -8.81442987385207e-280, 8.81950571114775e-312, -2.30331110816473e-156,  -1.12583501772562e-305, -2.30331110816477e-156, -2.11965588215675e-289,  0, NaN, NaN, 7.00767890008367e-310, 4.92150736865509e-303, -1.26836452888033e-30,  NaN, -3.15108981336725e-248, NaN, 2.56647495783721e-301, -2.35343652660979e-185,  -2.35343736826454e-185, -2.35343736826451e-185, 3.58211230561158e-306,  -2.87903833031139e-306, -8.24519868127501e-157, -2.30313370586657e-156,  -2.30331110816477e-156, -2.30331097358367e-156, -2.30331110816477e-156,  NaN, -5.48612677708849e+303, NaN, NaN, -9.77818300079457e-150,  2.99193134205649e-312, NA, -5.35532635250002e+305, 1.38803996951476e-309,  -6.69969684636807e-287, 2.89689873904097e-312, -7.39351988690281e-287,  NaN, NaN, -2.18103493600849e-289, 8.2889857824493e-317, 0, 0,  -1.84912323762905e-248, -1.18502757750127e+306, 2.96439387504748e-323,  NaN, 5.42203113091213e-312, 2.393494597516e-301, 1.13160106993595e-314,  -3.18993387177143e-248, -8.81442988447592e-280, 2.56647495437793e-301,  -2.30331110816311e-156, -2.30331110816477e-156, -6.05390363808932e-157,  -6.64678428257378e-287, -5.463546900558e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, 0), thresholds = numeric(0),      x = c(-1.24274918010211e-30, -2.30327665540415e-156, 3.97768442709347e-306,      -8.98798625795533e+307, -2.18103564566677e-289, 2.84878986386059e-306,      -1.90876994851904e-287, 1.32857088213122e+128, NA, NA, 1.78388675173214e+127,      1.78388675173214e+127, 1.78388675173214e+127, -Inf, 1.78388675173214e+127,      1.78388675173214e+127, -5.48659679317921e+303, NaN, 3.66145950596111e-314,      -1.2341419504043e-30, -1.80650535611164e+307, -9.7757963632732e-150,      2.73729184714066e-312, 1.11604253465019e-314, 3.60446694374285e-305,      -9.77941371393343e-150, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)