testlist <- list(rates = c(3.78576699573368e-270, NaN, -1.24351955275956e-30,  -1.26836459270829e-30, 5.20542961913381e-270, 4.00791842552789e-306,  2.34012289634757e-269, -1.26836459270829e-30, 3.94108708470682e-312,  -5.46354689225604e-108, -5.46354690059085e-108, NaN, 1.390652843099e-309,  -9.85476467117381e-147, -9.77579636327222e-150, NA, -2.30331110816477e-156,  NA, -2.30331097358367e-156, -2.30331110816477e-156, 3.80049446169736e-311,  -6.953355807835e-310, 3.91612999627766e-306, -3.56047810653759e-306,  6.79027504398222e-310, 0, 6.98179055144026e-310, 3.83698281198602e+117,  2.93988026276075e-306, 1.28646007791552e-313, 1.21044834447628e-305,  3.60289283426669e-306, 1.84851992783721e-272, 2.64868533186271e-305,  7.19919233907466e-310, 5.85363771174557e+170, 5.85363771868791e+170,  6.15509973953287e+170, NaN, NaN, NaN, NaN, -7.40367110377773e-171,  9.69630022349236e+192, 3.60253364704011e-306, 1.09009353376859e+217,  0), thresholds = c(7.11750304968475e-38, 7.11750304968475e-38,  7.11750304968475e-38, 3.5604834818807e-306, 9.70418706824673e-101,  9.67907259811454e-101, 3.57826741138282e-315, 9.34700350738556e-101,  9.70418706716128e-101, 3.65365168624447e-306, 2.8480945455619e-306,  7.10543086528503e-15, 9.70418706716139e-101, 9.70418706716128e-101,  9.7041598162183e-101, 6.90610911026731e-100, -1.83593039382374e-307,  8.74601785281721e-310, 8.5451750570825e+194, -8.06310497168394e+303,  NaN, NaN, 8.28904556439245e-317, 5.85363771866079e+170, 7.51896959321261e-304,  -2.97578981950058e-288, NaN, -9.77818300079457e-150, -9.77579636327222e-150,  3.65365168861588e-306, 8.28904605845809e-317, 0, 0, 9.23492568228087e-311,  5.79909433230408e-316, 6.95346190762455e-310, -6.56725888211742e-287,  6.96279910522665e-310, 0, 1.26822404694409e-314, 0, -9.11307071058342e-306,  1.38990724308225e-312, 1.59481413420777e-313, 7.18370196731299e-310,  7.95445689804407e-322, NaN, NaN, NaN, NaN, NaN, 6.23735309290021e+291,  2.71615461369542e-312, -2.30331110773024e-156, -2.30331110816477e-156,  NaN, 1.24798830039019e-305, -1.18646039752617e+306, -1.12583501746866e-305,  -2.29602087786811e-156, -2.30331110816477e-156, -2.30331110816477e-156,  -2.26051328155397e-289, 7.29112201961132e-304, -3.04032340213361e-288,  1.42873492468511e-101, -1.26834825275039e-30, NaN, -9.77580118946814e-150,  7.29112485532916e-304), x = 3.83698281198602e+117)
result <- do.call(grattan::IncomeTax,testlist)
str(result)