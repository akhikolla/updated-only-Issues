testlist <- list(rates = c(NaN, -2.82145658608792e-277, 3.41641322410626e-312,  -1.26836459270828e-30, 2.8435571614667e-312, -7.06373421489677e-304,  2.64121166339307e-301, -1.26836459270829e-30, NaN), thresholds = c(-9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, 9.82745041327995e-101,  2.81218450766349e-312, 8.2863938883057e-312, -5.66899487076606e+303,  NaN, 7.1987099133561e-310, NaN, NaN, 9.70534703761534e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, -1.97671907332562e+306, NaN, -2.25803837635704e-156,  -1.32083970121448e-284, 3.65207087186091e-306, 8.97712454626123e-308,  -2.11840698478091e-289, 1.24351972100265e-13, -3.72626152437281e+304,  NaN, 5.43230922486616e-312, -6.6467842630306e-287, -9.77817400050598e-150,  7.2903536873204e-304, -6.20646065000398e-145, NaN, NaN, -2.67105766053319e+305,  1.39066109167247e-309, 6.953355807835e-310, 3.09536474897224e-317,  0, 6.98594916738453e-310, 7.1807618192981e-304, -1.90877083252545e-287,  7.41606077195142e-310, -1.74162172578232e-248, 7.20047258077813e-310,  7.18075836269961e-304, -1.90877083252545e-287, 7.41606077195142e-310,  -1.74162172578232e-248, 7.20047258077813e-310, -7.39330193316336e-287,  -1.33453641541175e-314, 2.81199573737869e-312, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, 3.66343140689406e-305, -2.11967030492847e-289,  -1.26836419890938e-30, 2.39958945525286e-309, 1.1168827766335e-308,  6.23735309290007e+291, -7.64504129403545e-251, 6.95338647731194e-310,  -6.76385489327485e-231, 1.67129542792628e-112, -1.26836459270826e-30,  0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)