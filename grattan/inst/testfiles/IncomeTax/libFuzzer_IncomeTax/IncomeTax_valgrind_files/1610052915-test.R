testlist <- list(rates = c(-5.46354690059085e-108, NaN, NaN, 3.78573811262366e-270,  7.29112072938316e-304, 3.32652954498878e-111, 2.73737456970786e-312,  2.25779346205449e-309, -2.3033111081542e-156, -2.30331110816477e-156,  -2.30331110816476e-156, 1.09015244729545e+217, -3.0784026009623e-288,  NaN, NaN, 4.46108959687713e-140, NA, -2.24767481576651e-289,  -3.99103987224007e-33, -1.26836459270829e-30, 2.1788294981599e-321,  3.6634314009933e-305, -1.26841671353403e-30, -8.81442566349554e-280,  -3.79844687780135e-33, -1.26836425768999e-30, 4.362823346316e-311,  NaN, NaN, -1.40444776161118e+306, NaN, NaN, NaN, NaN, -2.82171801549672e-277,  -1.84912264488979e-248, NaN, -5.46354690059085e-108, -7.98899892059604e-308,  -2.94582314574698e-306, 1.39067116140532e-309, 7.74597242185584e-304,  -9.51980735528282e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, 9.82745041327995e-101, 2.81218450766349e-312,  8.2863938883057e-312, -5.66899487076606e+303, NaN, 0), thresholds = c(2.56647495783721e-301,  NaN, -2.35343736826454e-185, 3.65365169082126e-306, 4.94065645841247e-324,  2.81218450824649e-312, 5.85363771866079e+170, 8.62805110310557e-307,  -4.25550648705951e+305, NaN, NaN, NaN, NaN, -1.36573625663878e-151,  5.74181509254692e+199, -2.11852534547344e-289, NaN, NaN, 7.29112072943601e-304,  -3.04032340824977e-288, 5.5961025711071e-275, -5.48612406879369e+303,  NaN, 1.42873559907201e-101, -1.41042199454284e-231, -9.77579638261926e-150,  -5.08189403532328e-306, -2.35322190564443e-185, -2.35343736826454e-185,  -2.35343736825726e-185, -2.35343736826768e-185, -7.92736886180125e-308,  NaN, -1.23432850135778e-30, 2.56680426183462e-301, -8.01188945734414e-157,  -2.30331110816477e-156, -2.30331110816477e-156, -2.30331097358367e-156,  -2.30331110816477e-156, -1.26836459270829e-30, 8.81442566340335e-280,  -2.82145547645109e-277, 1.67129192517088e-112, 3.65365169215266e-306,  -5.77662200276729e-275, NaN, NaN, NaN, 7.09803712463454e+132,  4.23570862424304e-314, 2.64868533186271e-305, -2.82149851225675e-277,  -9.37438000463309e-287, NaN, 3.78576699573368e-270, 7.29112072938316e-304,  NaN, NaN, NaN, NaN, NaN, -5.07355014657367e-306, 3.83677392315864e+117,  7.29069965756708e-304, 0, 2.37151510003798e-322, 0, 9.23492756026786e-311,  2.71673452186878e-312, -2.83427023367766e+306, 2.29775643588197e+189,  7.19792909013142e-310, -7.55234771438901e-287, 3.7835305088198e+117,  -1.97637754038728e+306, 1.25986739689518e-321, 0, 2.47192511527748e-94,  -9.37438000465967e-287, 9.73187588854728e-309, NaN, -1.40444736503779e+306,  -1.4094657681933e-52, -1.05115074807266e-286, -1.21044017903676e-305,  -1.84912323760304e-248, -9.37438000463309e-287, -1.12858219058046e-276,  -2.30331110816477e-156, -2.30331110816477e-156, -2.30327665540415e-156,  7.1987099133561e-310, -5.46354690059085e-108, -5.46354690059085e-108,  0), x = c(NaN, -Inf, NaN, 3.23785921002061e-319, 0, 0, 0, 9.70418706716128e-101,  9.70418706716128e-101, -1.39393289016643e-288, 7.57771153258705e-304,  -6.56725888219402e-287, NaN, NaN, NaN, NaN, -1.05658906227133e+270,  3.23785921002061e-319, 0, 0, 0, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  -7.06416159557409e-304, 2.64121166339307e-301, -1.26836459270829e-30,  0, 3.94108708470682e-312, 2.71598149214445e-306, -1.26836459270233e-30,  3.66148293307183e-314, -1.2341419504043e-30, 2.11860059793463e-309,  0, 2.95489645946111e-306, Inf, -5.48612422239372e+303, -9.77702922971014e-150,  -Inf, 3.7835305088198e+117, -2.18103493532627e-289, 8.2889857824493e-317,  0, -8.81442986644817e-280, 1.38711353160361e-309, -1.06447548473127e-314,  1.06099789548264e-314, -2.11840698478085e-289, 1.24351972100265e-13,  -2.30331110816474e-156, -6.36358120662016e+305, -6.64678428260241e-287,  NaN, NaN, 7.19919234230625e-310, -2.12131688733295e-309, 3.65190389201212e-306,  3.916129996301e-306, -8.98798625795533e+307, -1.90877083252545e-287,  4.36707825033591e-306, 8.5451750570825e+194, -3.01627439281425e-289,  -1.83593039382815e-307, NaN, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)