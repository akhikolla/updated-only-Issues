testlist <- list(rates = c(9.70418706716128e-101, 8.41903230257847e-85, -2.73425567771101e+272,  9.70418161697268e-101, -3.93493921717659e-34, -8.81443176193936e-280,  -3.97083461829693e-34, -1.26836459270827e-30, 9.70418161697268e-101,  -1.26823091051179e-30, 2.33385326930198e-301, -2.97619001462835e-288,  -2.9718420926367e-147, 7.52609340439459e-304, NaN, -9.77818300079457e-150,  -9.77579636327222e-150, 3.65365168861588e-306, 0, 0, 9.23492568228087e-311,  5.79909433230408e-316, 6.95346190762455e-310, -6.56725888211742e-287,  6.96279910522665e-310, -1.09415610340935e-314, -9.88672610762845e-150,  1.34993253116851e-309, -2.30327665540412e-156, 7.1987099133561e-310,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, 2.96606708228929e-306, -3.01406960140899e-135,  3.66343140688495e-305, -3.85185988877447e-34, -8.81443176193936e-280,  -3.97083461829693e-34, -5.35044484313675e-108, 0), thresholds = c(-2.87284834993238e-188,  8.5451750570827e+194, -3.07840259503711e-288, -5.46354689218091e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.4635451747904e-108, -2.14480969940491e-106,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.71336793340794e+303, NaN, -8.22918577619206e+303,  4.46108959687689e-140, 3.42882753485303e+304, NaN, NaN, NaN,  9.70534703828064e-101, 9.70418706716128e-101, -1.34481107682851e-284,  NaN, -7.36331510668791e+303, NaN, -1.25811692763812e-30, 2.56647495592844e-301,  1.23269034419145e-30, -1.26836459270829e-30, 2.12205166040257e-314,  3.78579599166834e-270, -8.81443176193936e-280, 9.70395179012632e-101,  9.70418706716128e-101, 9.7041598162183e-101, 5.35249213585531e+116,  NaN, -1.26841746137343e-30, -8.81442566349554e-280, -3.60585388336262e-33,  3.66343140688495e-305, -2.15995176978972e-277, -5.69758255001719e-306,  7.29111937478047e-304, -3.04032340824977e-288, 2.72784216611317e-312,  2.64868533186271e-305, -2.82149851225675e-277, 1.42891481127927e-101,  9.70418706716128e-101, 1.95128366347825e-187, 2.34505333126984e-310 ), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)