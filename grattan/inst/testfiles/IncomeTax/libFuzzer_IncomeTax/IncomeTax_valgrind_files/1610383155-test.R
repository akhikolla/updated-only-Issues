testlist <- list(rates = c(NaN, -Inf, NaN, NaN, 8.74080230650327e-313, 1.54905692739971e-312,  NaN, 1.54905692739971e-312, 1.390671161567e-309, 6.55652911519985e-07,  NaN, -1.4960540225152e+241, NaN, 1.33822659216189e-48, NaN, 6.80564991275271e+38,  1.51189165578349e-304, 3.94213052632414e-259, 2.11195847952035e-106,  -5.74768227441153e+303, NaN, -5.06443593276214e+245, NaN, -1.29209058969159e+241,  7.88042552314682e-304, Inf, NaN, NaN, -8.22918610319053e+304,  -4.01038288453499e+245, 4.77045810117188e-299, NaN, 6.80564992442599e+38,  1.51189165578349e-304, 1.42943185985413e-101, 1.63335743813925e+40,  NaN, 4.89617984588572e-299, 7.10544092057131e-15, 9.12458837627621e-313,  0), thresholds = c(7.56881123708566e-304, NaN, NA, NaN, NaN,  NaN, NaN, NaN, -9.6516242874931e+241, -Inf, -6.03473647566956e+304,  -2.83637103418905e-124, 1.71272844748826e-260, -3.07268513826713e+54,  1.39785663411574e-304, 1.0429122855008e+40, 7.29023213934846e-304,  NaN, NaN, NaN, NaN, NaN, 6.99830926169978e-126, NaN, NaN, NaN,  -5.48633958130682e+303, -8.5243896509936e+245, -8.72554259640141e+245,  -6.17189479381467e+303, 2.70150264931866e-307, 1.71193373937516e-260,  Inf, 1.39064994516953e-309, NaN, NaN, NaN, NaN, -5.7502866102558e+243,  -5.75028645430585e+243, NaN, 3.24181196729963e+178, NaN, NaN,  9.96833088362619e-306, NaN, -1.06559867695611e-255, NaN, 7.23040570036398e-308,  7.105427357601e-15, NaN, NaN, 0), x = c(1.23971598178855e+224,  8.90389806695633e+252, 3.22257243370023e-115, 3.46845052707755e-164,  NaN, 2.12862023882621e-106, 8.37117697270291e+298, 3.48333079838242e-307,  6.8089704084083e+38, -8.53292470946426e+245, 5.95750279622772e+228,  -2.31776758035802e-212, NaN, -5.18931555224442e+245, NaN, NaN,  NaN, NaN, NaN, -8.73989987746428e+245, NaN, NaN, 3.24181522621478e+178,  4.77028265708835e-299, 1.82922136166111e-260, -2.67088736479396e-260,  NaN, 7.23040570036398e-308, -6.30948725319357e-256, 7.1177190551809e-304,  4.32185817775748e+43, -4.39920255204919e-259, -1.18182239472382e-125,  NaN, NaN, -5.7502866102558e+243, -8.22918610235701e+304, NaN,  2.7892346473729e+228, 2.08809742756317e-53, NaN, 5.95750278984886e+228,  NaN, 3.26792712858383e+178, 1.04291228749732e+40))
result <- do.call(grattan::IncomeTax,testlist)
str(result)