testlist <- list(rates = c(-1.2683642165418e-30, -1.26836407051221e-30, 1.88100416372243e-35,  NA, -1.42447098956418e-305, -8.24519868127501e-157, -2.30331110816477e-156,  -2.30331110816477e-156, -2.30331097358367e-156, -7.96118337904121e-308,  3.65784678046929e-306, 1.390671161567e-309, 3.56048353890995e-306,  -1.2683642165418e-30, -1.26836459270829e-30, -7.2239847844844e-287,  4.94065645841247e-324, -2.29827868269844e-185, 6.65988378995207e-310,  2.22507386265736e-308, NaN, 2.94024551642532e-306, 3.83698199955456e+117,  7.29069965756742e-304, 0, 0, 0, 2.3641409746639e-308, 1.48456814906984e-313,  3.9191047797502e+202, -2.18028465462708e-289, 534.645996093779,  NaN, 2.47229315721747e-94, -9.37438000465967e-287, 2.61006680314917e-312,  5.4323092248711e-312, 0, Inf, NaN, NaN, NaN, NaN, NaN, NaN, 2.80614289249855e-312,  -2.2308331518689e-289, 1.39067116173462e-309, 0, 0, 0, 9.72926582174422e-309,  3.19957177856482e-314, -1.36890628235454e-231, NaN, 7.73071190387239e-12,  6.98327594525623e-310, -6.05898824717554e-65, -2.25769487008466e-289,  8.74601785371863e-310, 3.652068166337e-306, -9.11378520770331e-306,  2.40060263696258e-300, 5.67865049360052e-270, -1.26836459270826e-30,  2.8435571614667e-312, -7.06373421489677e-304, 2.9621337120295e-306,  -3.01406959776519e-135, -8.47794417983927e+303, 0), thresholds = c(7.71532912545691e-320,  0, 0, 1.69759663277222e-313, 0, 0, 7.06327445644526e-304, -3.13227758653431e-294,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333789e-292,  4.46078843844753e-99, 7.19919233962066e-310, 2.12131683540626e-309,  4.36707825033567e-306, -6.36390391980068e+305, 3.65207087186091e-306,  NaN, NaN, 1.39067049844331e-309, 0, 0, 0, 9.70418614810987e-101,  2.34505333126984e-310, 7.19870908769578e-310, 2.9548978549633e-306,  2.39957410182667e-309, 5.68604456976406e-270, -1.26836459270829e-30,  1.11076451584089e-314, 3.02540651506046e-306, 6.9881578015912e-310,  -4.93185008441161e-31, NaN, -5.79189576537157e-34, -9.21253817472007e-280 ), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)