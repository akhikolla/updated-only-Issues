testlist <- list(rates = c(NaN, 2.80614289249855e-312, -2.2308331518689e-289,  6.95335580951117e-310, -2.69092032456518e+305, NaN, 6.95335580945396e-310,  9.72926582174422e-309, 2.84809453888922e-306, 2.84347436052587e-312,  2.47222686857108e-94, -3.59749306162079e-147, 4.55436545804045e+284,  2.93387746008483e-306, 2.47222830161894e-94, 8.74941304845106e-310,  3.652068166337e-306, 1.04430388256985e-14, 1.24660103877243e-266,  1.96568260790928e-236, -3.85254213647597e-34, 3.56048353890995e-306,  -1.26836459270255e-30, -6.64551026028429e-287, 8.89695782324104e-305,  -1.26836459066847e-30, -1.36890628482908e-231, 3.65365169082652e-306,  5.67939870436007e-270, -1.26836459270826e-30, -7.92736885185452e-308,  2.4719252581509e-94, NaN, 7.00767890008367e-310, -8.81770404570679e-280,  1.89921289970666e+289, 1.425439003045e-308, NaN, 8.37292633152689e+115,  Inf, 2.84878986386059e-306, 2.11860490832873e-309, -5.78534238436574e-34,  5.14291167536868e+25, 4.02844298706782e-306, Inf), thresholds = c(-5.81449464426613e-34,  -1.28189897098414e-30, 6.01362129181413e-317, 1.55587395324171e-59,  -1.26836459270829e-30, 5.67865050383217e-270, 2.89259601947859e-307,  9.16822773189398e+298, 2.56647495438016e-301, -1.26836452888033e-30,  6.01362129181413e-317, -1.26836459057627e-30, -1.38763395756474e-31,  -1.26836459270829e-30, 8.24445099066359e-312, -9.11306812174856e-306,  8.34402647205924e-310, -7.93443086178592e-308, -2.82116724839022e-277,  NaN, -8.81442988344703e-280, 7.74565138159227e-304, 2.12198042552369e-314,  0, 0, 0, 1.40913782993788e-315, 8.84871571701673e-321, -5.35532635250002e+305,  -1.9701660096791e-305, -3.67243167611472e-306, 3.83677392315864e+117,  7.29069965756708e-304, 0, 2.37151510003798e-322, 0, 9.23492756026786e-311,  5.79909433230408e-316, 1.44804023176556e+190, -2.52404678082994e-29,  -1.26836459270829e-30, 3.78576699573368e-270, 1.00891829346111e-309,  3.78350645979958e+117, -5.88325609941177e-306, 3.23785921002061e-319,  3.8004944616188e-311, NaN, -5.49549975700411e+303, -2.26051328138614e-289,  9.70418614815292e-101, 8.02711540254363e-125, 9.70408896376656e-101,  1.42873424000035e-101, 9.7027918188809e-101, 9.70418706716128e-101,  9.70418706716128e-101, -8.81442987198527e-280, -1.26834825275039e-30,  1.53948714210656e-314, -1.26836404691013e-30, -2.82145547645118e-277,  -1.24274918010211e-30, -1.26836459270829e-30, 9.70418706714725e-101,  4.95223053951257e-303, 2.12628684398374e-314, NaN, NaN, NaN,  NaN, NaN, 8.6221612017154e-308, -3.08053174180531e-30, -2.1788294981599e-321,  NaN, 7.19929512000783e-310, NaN, NaN, 1.08646184497373e-311,  8.97712454626148e-308, 8.54517853790629e+194, NaN), x = c(1.78388675173214e+127,  1.78388675173214e+127, 1.78388675173214e+127, 1.78388675173214e+127,  5.85363771868542e+170, 1.21044018067558e-305, 5.85363621808927e+170,  7.51896959321261e-304, 1.39248450898434e+188, -2.11852534547713e-289,  -2.97578918705747e-288, -5.66324543051447e+303, -2.18103493600851e-289,  8.2889857824493e-317, 0, 0, 0, -5.48612407015086e+303, 3.66343140688495e-305,  8.81442566340249e-280, -5.48612406879369e+303, NaN, 1.42873559907201e-101,  -1.41042199454284e-231, -9.77579638261926e-150, -5.08189403532328e-306,  3.00089887426119e+284, 0, 4.94065645841247e-324, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 1.00917293318112e-309,  2.67904643304077e+301))
result <- do.call(grattan::IncomeTax,testlist)
str(result)