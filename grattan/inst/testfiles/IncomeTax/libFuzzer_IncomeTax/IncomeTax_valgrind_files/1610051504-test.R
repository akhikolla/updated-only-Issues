testlist <- list(rates = c(7.29069965756734e-304, 0, 1.390671161567e-309,  3.60253365100228e-306, 2.39728018727028e-308, 6.95484037598407e-310,  -2.35343736826449e-185, -2.32219514245902e-185, -2.35343736826454e-185,  -8.11440247737268e-289, -7.92736885185439e-308, -7.71532912545691e-320,  2.95908645841946e-306, -2.30328041021634e-156, 8.53111895773439e-85,  1.91777968406795e+289, 1.425439003045e-308, -1.84912323759913e-248,  2.40313001605884e-306, 0, NaN, 7.17719822995867e-304, 530.000489264742,  4.46108959078265e-140, 3.60297094497336e-306, -1.06556334613796e-314,  9.7020880290895e-310, -7.39330493781016e-287, -1.33453641541175e-314,  2.81199573737869e-312, 6.985949593258e-310, 9.37333633526043e-312,  -5.78534238436574e-34, -1.26836459270829e-30, 4.33892353296385e-317,  7.00746712868804e-310, -4.93185008443201e-31, 1.00891829368586e-309,  -1.23259516440783e-30, 2.56647495592844e-301, NaN, -3.67243182468058e-306,  1.81346311408636e+286, 7.17075811524227e-310, -5.48612407019093e+303,  2.96439387504748e-323, NaN, -1.36890628484775e-231, NaN, 7.73071190387239e-12,  9.64395893538462e-101, 9.70418706716128e-101, 9.70418706715965e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418696071228e-101, 2.34505333126984e-310,  2.95489645946111e-306, 7.10542909137157e-15, -5.48612422239372e+303,  7.50157548985994e-101, 7.10656581002521e-15, -2.18079744471698e-289,  5.4323092248711e-312, 3.65206986391291e-306, 6.98594916584147e-310,  0, 0, 0), thresholds = c(-1.73323290479693e-248, 7.20047258077813e-310,  3.98264587882868e-317, 8.28904605845809e-317, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 6.02250953278281e-317,  2.1261403772349e-314, -3.56047810653759e-306), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)