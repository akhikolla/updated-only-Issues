testlist <- list(rates = c(5.02914452846372e-99, 9.70418706716128e-101, -2.11840698478085e-289,  1.24351972100265e-13, 5.16387177870257e+120, -2.95250654929581e-135,  -1.26836459245897e-30, NaN, 3.6634314009942e-305, 4.00791842555784e-306,  -4.9540049074147e-33, -1.26836459270829e-30, 2.1788294981599e-321,  -1.26836459066847e-30, -4.76141252969079e-33, -1.26836459270829e-30,  8.81442566340335e-280, -2.82145547645109e-277, 9.70418706716128e-101,  NaN, 1.00891829368586e-309, NaN, -7.40367108244993e-171, -2.30331110818153e-156,  -Inf, 1.25306450820446e-316, -5.69758254997445e-306, 7.29111937478047e-304,  -Inf, 2.72784216611317e-312, 2.64868533186271e-305, -2.82149851225675e-277,  3.41641322410626e-312, 9.70418706716128e-101, NaN, NaN, NaN,  NaN, 3.65365169506531e-306, 2.12199579096527e-314, -5.21531605995909e+73,  0), thresholds = c(Inf, NaN, -9.77719780333789e-292, -9.77719780333789e-292,  -7.39330276865421e-287, -2.25704522481571e-277, -1.48508910633323e-267,  NaN, -3.07840260097373e-288, NaN, NaN, NaN, 0, 0, 0, 9.6439561139442e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, -2.96164487932264e-277,  NaN, NaN, NaN, 2.81199605989981e-312, NaN, -1.40444776161118e+306,  NaN, NaN, -5.48612502935171e+303, NaN, 7.07039469279248e-304,  7.06416448596898e-304, -6.98448328841344e-251, 2.18001917661488e-314,  -9.77719780333789e-292, 9.70418706716128e-101, NaN, NaN, NaN,  2.81199605989981e-312, -2.35349019634932e-185, -8.34402696940198e-310,  1.29445893400307e-312, 7.84460841917251e+168, 1.25705122271388e-319,  0, -1.12850385925865e-276, -1.26836459270732e-30, NaN, 1.00891829346114e-309,  -2.11966640218436e-289, -1.26836459123889e-30, 9.37339630957792e-312,  -2.35322190464899e-185, NaN, -2.35343736825726e-185, -8.11440248256909e-289,  -7.92736885185439e-308, 7.17086066211644e-310, 2.56647495110178e-301,  -4.9540049074147e-33, -1.26836459066993e-30, -1.26836459270829e-30,  NaN, -1.7918411710445e-219, -2.35343723098535e-185, 3.71734949417019e+282,  -7.92737105058866e-308, -8.34391291214049e-310, 0), x = c(3.94108708470682e-312,  2.71598149214445e-306, -1.26836459270233e-30, -3.32695152419356e-111,  2.56647613060929e-301, -3.01363922187472e-135, -2.30331110816476e-156,  -2.30331110816477e-156, -2.29449120144681e-156, 3.65207087186085e-306,  -5.46354690059072e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354689384944e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, NaN, NaN, NaN,  -2.17981035512146e-106, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354689384944e-108,  -5.46354690059085e-108, 2.81218450828601e-312, -5.46354689226155e-108,  -8.81442986664383e-280, -5.46354690059072e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, -2.18004979116321e-289, 2.72810281967378e-312,  -2.83427023367766e+306, -1.02081843443063e-149, 7.2903536873204e-304,  NaN, NaN, 9.76118063839085e-313, 544, -1.48508911181252e-267,  9.70534450479454e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, -1.97671907332562e+306, NaN, NaN, -8.06526887029393e-308,  -3.00064086860534e-288, 6.52166652510445e-322, 4.95400018337535e-317,  0, 7.29069966398625e-304, -9.77719780333766e-292))
result <- do.call(grattan::IncomeTax,testlist)
str(result)