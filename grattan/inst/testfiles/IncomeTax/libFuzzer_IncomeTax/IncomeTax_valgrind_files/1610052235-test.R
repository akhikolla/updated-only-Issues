testlist <- list(rates = c(2.64121166339307e-301, -1.26836459270829e-30,  0, 3.94108708470682e-312, 2.71598149214445e-306, -1.26836459270255e-30,  3.66148293307183e-314, -1.2341419504043e-30, -2.24767481577173e-289,  9.70418706357123e-101, 7.91826926828272e-101, 9.70418668394489e-101,  9.64395611395822e-101, 9.70418161697268e-101, 9.70418706716128e-101,  -2.29602087786812e-156, -2.30331110816477e-156, -2.30331110816477e-156,  -2.30331110763906e-156, -2.30331110816477e-156, -1.28189897098414e-30,  -1.26832417499123e-30, 7.02393507371655e+291, -7.39330193343209e-287,  -1.33453641541175e-314, 2.81199573737869e-312), thresholds = c(-5.46354690059085e-108,  -5.4635469005581e-108, 3.78573811262366e-270, 7.29112072938316e-304,  3.32652954498878e-111, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, 1.39067049844331e-309, 0, 0, 0,  9.70418614810987e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, NaN, 1.00011396737199e-100,  NaN, -5.4635469005581e-108), x = c(6.9919199321285e+246, 5.85363771174557e+170,  2.8480955933963e-306, 7.10613482625773e-15, 3.65365307436282e-306,  2.8480945455619e-306, 5.77662485446992e-275, -2.25706004477176e-277,  -1.48508910633323e-267, -3.0136392218747e-135, -1.12858219058046e-276,  -2.30331110816477e-156, 6.9919199321285e+246, -2.30327665540415e-156,  NA, -7.39330524439149e-287, 6.9919199321285e+246, 2.81199573737869e-312,  0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)