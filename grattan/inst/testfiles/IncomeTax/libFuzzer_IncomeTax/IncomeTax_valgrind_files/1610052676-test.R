testlist <- list(rates = c(-2.3033109735732e-156, -6.77200283545981e-287,  NaN, NaN, NaN, -2.33073147850006e-156, 2.36359027774579e-312,  0, 0, 3.60739284464096e-313, 2.26527122355628e-318, 8.54602158179859e+194,  7.18076182606196e-304, -1.90877083252545e-287, 7.41606077195142e-310,  -1.74162172578232e-248, 7.20047258077813e-310, 3.98264587882868e-317,  8.28904605845809e-317, NaN, NaN, NaN, NaN, NaN, 3.38460656020607e+125,  NaN, -8.81442989928447e-280, 2.00877668060135e-139, 2.00877667922349e-139,  7.10464042017561e-304, NaN, 1.09850957322306e-314, 6.95367949510419e-310,  -6.76385741726459e-231, -6.56793027847815e-287, 1.38999208669611e-309,  2.393494597516e-301, -2.11967526315702e-289, 2.87903573600567e-306,  2.67878390814356e+301, -1.26836459117002e-30, 5.67865050383217e-270,  -2.08934551532475e-289, 9.70418706723025e-101, 3.91612999628465e-306,  2.00877667922887e-139, 2.00877667922349e-139, 1.3862250937717e-309,  2.36292526340207e-94, -7.5648509762186e+303, -5.82900681339507e+303,  2.65985899590435e+277, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN), thresholds = c(2.94832336573484e-306,  1.86165783044538e-130, -2.30331110816477e-156), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)