testlist <- list(rates = c(-9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -2.82126001103731e-277,  -1.39408757479111e-309, -1.24267801634966e-267, NaN, 4.65661287305794e-10,  -Inf, NaN, NaN, 1.25986739689518e-321, 0, 0, 1.42873423910284e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, -1.34481107682851e-284,  NaN, -7.36331510668791e+303, NaN, 7.1987099133561e-310, -2.47640334747687e-156,  -2.30331110816477e-156, -6.36358120533743e+305, -6.59781424874929e+303,  -3.10267783772085e-277, 1.38711353160361e-309, 9.37333633526043e-312,  -5.78534238436574e-34, -1.26836459270829e-30, 4.33892353296385e-317,  7.00746712868804e-310, -4.93185008443201e-31, 1.00891829368586e-309,  -1.23259516440783e-30, 6.95335640919713e-310, -4.93185008441161e-31,  NaN, -5.79189576537157e-34, NA, 1.23269447171475e-30, -1.26836459270829e-30,  NA, -1.26836407051221e-30, 1.88100416372243e-35, -1.26836459270829e-30,  5.5869437297374e-319, -2.247674815751e-289, -1.24371214513728e-30,  -1.26836459270033e-30, 3.66343140688495e-305, 2.67904643304077e+301,  -1.26836459123889e-30, 9.37339630957792e-312, -5.78534238436574e-34,  2.56647495592844e-301, 7.29112639256595e-304, NaN, -2.11840698478085e-289,  1.24351972100265e-13, 7.2903536873204e-304, 1.09614956738224e-314,  NaN, 6.98184194556246e-310, -2.69092032456518e+305, NaN, 0),      thresholds = c(-1.26836407051221e-30, 2.10776830652961e-309,      -6.64550662527324e-287, 9.38197868360131e+301, -1.36890628482908e-231,      NaN, -3.12856748983561e-147, 7.52609340439459e-304, NaN,      -9.77818300079457e-150, 2.94613684519112e-306, -1.01124262054605e-185,      6.06584682809919e-301, 1.21044018122494e-305, -6.64550663505903e-287,      -2.34568207499818e-185, -1.23269146090507e-30, 3.78576699573368e-270,      -1.26836459270033e-30, 7.27950633336389e-310, -5.66324542991447e+303,      -1.12858219058046e-276, -1.26836459270732e-30, 9.14021444806306e-322,      1.00891829368495e-309, 2.67904643304077e+301, -1.26836459123889e-30,      9.37339630957792e-312, -5.78534238436574e-34, 2.56647495592844e-301,      7.29112639256595e-304, NaN, -2.11840698478085e-289, 1.24351972100265e-13,      7.2903536873204e-304, 1.09614956738224e-314, -2.8213831420555e-277,      6.52166652510445e-322, 0, 8.44254251528635e-227, 3.8004944616188e-311,      -6.953355807835e-310, 1.11073217183338e-314, -7.92737104019607e-308,      7.17066143930354e-310, 8.31143311567173e-310, 0, -2.95841658691758e-188,      1.94693962620681e-307, 1.0451773909944e-308, -3.02879630252661e-288,      -3.97647786797245e-34, 9.37339630957792e-312, 1.70257006040729e-313,      -3.9759940224262e-34, -1.26823100659151e-30, -1.26836459270829e-30,      NaN, -9.77719780327796e-292), x = c(NaN, NaN, NaN, -8.01278411778457e-157,      -2.7709405461779e-157, NaN, -6.05390363808932e-157, -2.20130582005294e-289,      -2.30331110546839e-156, 1.32312337201795e-314, 0, 0, 0, -Inf     ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)