testlist <- list(rates = c(-9.77580118946814e-150, -2.97619079749159e-288,  -2.11852534546505e-289, -1.1168827766335e-308, -2.35343736497682e-185,  7036874417766.4, -2.35343736826454e-185, 7.17736025324585e-310,  7.32777351949015e-15, -3.85185988877447e-34, -8.81443176193936e-280,  3.65365169003036e-306, 5.85363594144907e+170, 5.85363771868791e+170,  3.75990818875158e+175, NaN, NaN, NaN, NaN, -7.40367656369217e-171,  7.51897652547993e-304, -2.97578962378101e-288, 2.64121103084183e-301,  -2.82156678760543e-277, 3.41641322410626e-312, 1.08601191821704e-306,  3.56048353888947e-306, -1.26836459270255e-30, 3.66148293307183e-314,  -1.2341419504043e-30, 3.66343140688495e-305, -1.26836459270251e-30,  3.66148293307183e-314), thresholds = c(-5.55169938055022e+306,  3.23059644502674e-319, 9.72926582174422e-309, 2.84809453888922e-306,  2.84347436052587e-312, 2.47222686857108e-94, 3.5601616320854e-306,  -1.75555970462997e+306, 7.1987099133561e-310, NaN, 3.78576699573368e-270,  7.29112072938316e-304, -3.04032340824977e-288, 8.33871070682195e-310,  7.19919233907466e-310, 5.67154552427533e-310, 1.9469396261939e-307,  1.0451773909944e-308, -3.02879630252661e-288, 7.19870960575483e-310,  NaN, NaN, NaN, 1.42873492569887e-101, -1.26834825275039e-30,  NaN, -1.26823093099111e-30, -2.24767623012983e-289, -1.24371214513728e-30,  -1.26836459270829e-30, 3.78576699573368e-270, -1.26836459270033e-30,  -1.24351955275956e-30, -1.26836459270829e-30, 5.20542961913381e-270,  4.00791842552789e-306, 2.34012289634757e-269, -1.26836459270829e-30,  3.94108708470682e-312, 4.91407572666621e-319, 0, 0, -5.48612407015086e+303,  2.96439387504748e-323, 9.36320721986996e-97, -1.41042199454284e-231,  -2.30331110816271e-156, -5.5516993870748e+306, 2.81218450798463e-312,  5.85363771866079e+170, 8.62805110310557e-307, -4.25550648705951e+305,  NaN, -1.42447098956418e-305, -8.24519868127501e-157, -2.30331110816477e-156,  -2.30331110816477e-156, -5.55169906269231e+306, -3.32695152419361e-111,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -1.82724810416579e-305, 3.83677401710034e+117, -5.46354689219791e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, 1.82724810416579e-305, NaN, -8.22918577619206e+303,  4.46108959687689e-140, 3.42882753485303e+304, NaN, -2.87284973051533e-188,  -2.35343736826454e-185, -2.353436891546e-185, -2.35343736826454e-185,  7.17736025324155e-310, 7.32777351949015e-15, 2.64868533186271e-305 ), x = c(-9.77719780333788e-292, -Inf, -3.01363922187472e-135,  -2.30331110816476e-156, NaN, -2.29449120144681e-156, -2.30331110816477e-156,  -1.84314079543842e+306, 7.1987099133561e-310, NaN, 3.78576699573368e-270,  NA, -3.04032340824977e-288, 2.72784216611317e-312, 2.64868533186271e-305,  -2.82149851225675e-277, 7.19870991012477e-310, NaN, 3.78576699573368e-270,  7.29112072938316e-304, NaN, NaN, NaN, -1.34497461654424e-284,  NaN, -Inf, -2.95250654929591e-135, -1.26836459245897e-30, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)