testlist <- list(rates = c(4.65661286890991e-10, NaN, -Inf, -9.77817400064824e-150,  7.2903536873204e-304, 4.77772761395655e-299, NaN, -5.48681744862531e+303,  NaN, -2.29552034472353e-156, -9.77719780333766e-292, -9.77719780333789e-292,  -9.77719780333789e-292, Inf, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -7.39330276865421e-287, -2.25704522481571e-277,  -1.48508910633323e-267, NA, -3.07840260097373e-288, NaN, NaN,  NaN, 0, 0, 0, 9.6439561139442e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, -Inf, 9.70418706716128e-101, -2.96164487932264e-277,  NaN, NaN, NaN, 2.81199605989981e-312, -9.19490325324785e-186,  5.67865049363487e-270, 3.94108708383232e-312, 1.60559150222512e-146,  -5.46354690059085e-108, -5.46354690059085e-108, -1.82724810416579e-305,  3.83677401710034e+117, NaN, 0, 0, 0, 8.44254251528635e-227, 3.8004944616188e-311,  -2.35322190464899e-185, -2.35343736826454e-185, -2.35343736825726e-185,  -8.11440248256909e-289, -7.92736885185439e-308, -2.11852534547211e-289,  3.45845952088873e-323, 6.6204796542727e-322, 0, -5.48612407015086e+303,  8.74612395183231e-310, -2.2955196501199e-156, 9.14021444806306e-322,  3.7835305088198e+117, -1.97637754038728e+306, 2.72814038002143e-312,  -2.18078569673482e-289, -2.30331110816477e-156, -1.32083970121448e-284,  3.65207087186091e-306, NaN, NaN, 0), thresholds = c(-5.4629989822624e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.4635451747904e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.4632762290939e-108, NaN, -3.10503618460142e+231, -5.96890832411666e+306,  -5.82900230650667e+303, NaN, NaN, -5.48612930076931e+303, NaN,  NaN, NaN, NaN, 7.2911220195564e-304, NaN, NaN, -2.60644468698059e+304,  -5.66324542991478e+303, -5.35532635247727e+305, 1.38803996951476e-309,  -6.69969684636807e-287, 2.89689873904097e-312, -3.18411881987467e-248,  1.80354409094537e-130, 1.55571390562492e-319, 3.23790861658519e-319,  NaN, -3.01363922187477e-135, -1.26836459245897e-30, 2.34903511315221e-319,  3.6634314068609e-305, -2.11966640218428e-289, -1.2683642165418e-30,  2.39958945525286e-309, 5.68604456976406e-270, -8.81443176193936e-280,  -1.83593039385406e-307, -2.6064446869563e+304, -5.66324542991478e+303,  2.84809454421703e-306, 3.78987813636309e-312, 3.65365169083783e-306,  2.8480945455619e-306, -5.48612677708818e+303, 2.72888655986149e-312,  3.66145950596111e-314, -1.2341419504043e-30, -1.80650535611164e+307 ), x = NaN)
result <- do.call(grattan::IncomeTax,testlist)
str(result)