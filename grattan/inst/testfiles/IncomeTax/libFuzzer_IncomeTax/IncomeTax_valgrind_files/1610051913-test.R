testlist <- list(rates = c(NaN, NaN, NaN, -8.81442989928447e-280, NA, -2.30331110816311e-156,  -2.30331110816477e-156, -6.05390363808932e-157, -2.30331110816477e-156,  2.72938588030555e-312, 2.00877703195536e-139, 2.00877667922349e-139,  -4.18002442595755e+304, -2.38677000418437e-253, 1.29145347579917e-231,  9.70418706357124e-101, 9.70418706716095e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706715965e-101,  -4.29176066400132e-278, -1.26836459270732e-30, 9.14021444806306e-322,  1.00891829368495e-309, 2.67904643304077e+301, -1.26836459123889e-30,  NaN, 2.56647495437793e-301, -2.30331110816311e-156, -2.30331110816477e-156,  -6.05390363808932e-157, -6.64678428257378e-287, -5.463546900558e-108,  1.19750531754609e-300, 1.21044018122494e-305, 5.85363771868791e+170,  2.10901416965392e-312, NaN, NaN, NaN, NaN, NaN, -5.02570917414969e+306,  6.37328271834745e+40, -8.06310497168394e+303, NaN, -2.44577695091718e-29,  2.1788294981599e-321, 3.6634314009933e-305, NaN, NaN, 5.43230922486616e-312,  NaN, 7.74565138159237e-304, 2.12198042552369e-314, Inf, 0, 0,  0), thresholds = c(1.3262485946361e-315, 0, 9.70418706357123e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, -3.72626152437281e+304, NaN, 4.77830972673634e-299,  NaN, 4.65661287305794e-10, 6.23700096733358e+291, -6.96279908893587e-310,  -1.84912323760304e-248, 2.40313001605884e-306, -1.25152205454489e+306,  -3.897900943445e-31, -2.82145547645118e-277, 7.19919234074421e-310,  -8.81442912463381e-280, 2.94832336573484e-306, 2.84878988002366e-306,  2.97215382541413e+195, -8.81442987983973e-280, 7.74565138159227e-304,  -2.23296116680901e-286, 1.28853504983371e-231, 5.85363771868791e+170 ), x = c(0, 0, 5.59610256518376e-275, 0, 4.91407572666621e-319,  2.72888639290682e-312, 3.63041237940668e+282, 2.71984550446759e-312,  7.19919233907545e-310, -7.55234771438901e-287, 3.7835305088198e+117,  -1.97637754038728e+306, 1.25986739689518e-321, 0, 0, 0, 9.72926582174422e-309,  NaN, -1.40444736503779e+306, -1.4094657681933e-52, -1.05115074807266e-286,  -1.21044017903676e-305, -1.84912323760304e-248, 2.40313001605884e-306,  7.2911220195564e-304, -2.11940804072442e-289, 5.41494189803772e-312,  8.27241580881908e-317, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, -1.26836459351501e-30, 4.00930495879766e-306,  2.87882979119551e-306, -1.26836459270042e-30, 1.11688277665699e-308,  2.92300334561069e+48, NaN, 2.73737457034026e-312, -4.18023207308323e+304,  6.66135840747845e+286, 1.29145347579917e-231, -5.46382737282277e-108,  -3.32693909993427e-111, 3.65365169145968e-306, 2.62480682658967e-301,  -6.56793027847815e-287, -8.81442988493713e-280, -2.64494692448922e+154,  2.29775642758308e+189))
result <- do.call(grattan::IncomeTax,testlist)
str(result)