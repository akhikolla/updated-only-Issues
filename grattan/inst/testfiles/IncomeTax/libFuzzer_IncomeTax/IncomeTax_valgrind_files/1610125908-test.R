testlist <- list(rates = c(-Inf, NaN, NaN, -1.71819990764409e-93, NaN, 5.43223507567683e-312,  -1.73807234310764e-93, NaN, -5.48630291652283e+303, 7.29032584869847e-304,  3.94019876227253e+117, 2.84688099358817e-315, 0, 0, 0, 0, 0,  0, 0, 0, 0, 0, 0, NaN, 3.9656346395276e-310, NaN, 2.99521925137825e-05,  -1.30007788211321e+28, -1.34765550943381e+28, -1.34765550943381e+28,  -2.82610395145375e+304, NA, 7.09620554955117e-304, 1.5493055987864e-312,  NaN, 1.39065217965152e-309, 3.36145319511697e-111, 5.43223499222915e-312,  -3.56450720366282e-93, 3.56159180157686e-314, 5.67167035009198e-310,  1.36276004517322e-105, 7.50871604544128e-308, 2.63554839664967e-82,  3.90927718614343e-308, -2.48704362952506e+304, 3.83698281557392e+117,  -2.63333955373911e+305, 4.63265839865474e-26, NaN, 1.54907603106055e-312,  NaN, NaN, 1.23170650482939e+194, 5.67188206399738e-310, -1.37153520044139e+305,  -2.70503512221398e-11, -2.70494424244937e-11, -2.70494424244937e-11,  NaN, -4.65661230060988e-10, -2.70494424244937e-11, -2.08849857910726e+307,  7.29032584869847e-304, 6.2064667598767e-145, -1.30007882641357e+28,  -1.34765550943381e+28, -1.34765550943381e+28, -1.34765550943381e+28,  -1.34765550943381e+28, -1.34765550943381e+28, -1.34765550943381e+28,  -1.34765550943381e+28, NaN, NaN, 7.2911220195564e-304, 4.46015025262667e+43,  7.15604264128451e-304, 2.68176213293031e-29, 2.95941217102158e-144,  -1.45681534510384e+144, 6.47730923160515e-145, 3.32663941052482e-111,  2.5398445847572e-29, 1.10154625032203e-142, -5.48636997164761e+303,  7.2902319900132e-304, 2.11341795974108e+170, 2.86510451913632e-173,  7.88084934421276e+117, 0), thresholds = c(2.63554839664967e-82,  2.12196341187911e-314, -2.48704362952506e+304), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)