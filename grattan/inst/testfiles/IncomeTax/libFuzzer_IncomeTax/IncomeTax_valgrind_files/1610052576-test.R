testlist <- list(rates = c(-Inf, NaN, -1.26836459271144e-30, 3.78576699573368e-270,  -1.26836459270033e-30, NaN, -9.77719780327796e-292, Inf, -9.77719780333789e-292,  -9.77719780333789e-292, -1.12850385925865e-276, -1.26836459270732e-30,  NaN, -1.40444775900542e+306, -2.11966640218436e-289, -1.26836459123889e-30,  9.37339630957792e-312, -5.78534238436574e-34, -1.26836459270829e-30,  -1.26836459122741e-30, 9.37339630957792e-312, 1.70257006040729e-313,  -3.9759940224262e-34, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -2.82126001103731e-277, -1.39408757479111e-309,  -2.14507274745263e-289, NaN, NaN, -5.48612677708849e+303, NaN,  NaN, 8.28904161186728e-317, 0, 0, 0, 9.70418706716122e-101, 2.33991774416376e-269,  1.21044036459853e-305, Inf, NaN, -Inf, NaN, -7.76289525494821e-171,  -2.35343652660979e-185, -2.35343736826454e-185, -6.6243372842224e-171,  2.8487888201287e-306, 7.10591798586467e-15, -2.35343656779183e-185,  0), thresholds = c(NaN, NA, NaN, 5.85363771868807e+170, 3.75990818875158e+175,  NaN, NaN, NaN, NaN, -7.40367656369217e-171, 7.51897652547993e-304,  NaN, -7.76289525494821e-171, -5.02570917315353e+306, 6.37328271834745e+40,  1.84870520286829e-272, NA, 1.09015244729545e+217, -3.0784026009623e-288,  NaN, NaN, 6.15509863078879e+170, 1.390652843099e-309, -5.16216864106284e-306,  -8.81442986644817e-280, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)