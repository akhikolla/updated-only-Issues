testlist <- list(rates = c(3.65365169082132e-306, 5.85363594144907e+170,  5.85363771868791e+170, -2.18085028419172e-289, NaN, -8.81442986664383e-280,  2.94832336573484e-306, 1.86165783044538e-130, -1.40946656124468e-52,  -6.5692055167788e-287, 9.69630020768059e+192, 3.60253364836636e-306,  7.73071187686185e-12, 7.10656579635189e-15, 7.55042460341774e-15,  0, 0, -5.48612407015086e+303, -9.77580118946814e-150, 5.8536377186878e+170,  5.39907627431893e-310, 5.85363771174557e+170, 2.8480955933963e-306,  7.10613482629917e-15, 5.84081900317626e-308, -1.06099795625271e-314,  4.12233521746305e-228, -9.77717226889371e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, NA, NaN, 7.00767890008367e-310,  2.00886697858165e-139, 2.00877667922349e-139, 8.40642559654881e-85,  1.91777968406795e+289, 1.42543900304488e-308, 7036874417766.31,  -2.35331532831998e-185, -7.22077750345932e-277, -4.27803982342683e-317,  2.29750112864321e+189, -1.48603602467489e-267, -3.97083461829737e-34,  -1.26836459270827e-30, 0), thresholds = c(0, 1.26822404694409e-314,  0, -9.11307071058342e-306, -7.5657924668219e-171, -1.38856247895918e-309,  3.93320657029289e-310, 3.56013858723244e-306, NaN, NaN, NaN,  NaN, NaN, -9.77580118946814e-150, 2.33246235504083e-12, -2.05226840465112e-289,  2.87903833578224e-306, 0, 3.24665356017687e-312, 0, -2.29844981641981e-185,  3.55816254229689e-310, -1.12858219058046e-276, -1.26836459270732e-30,  9.14021444806306e-322, 1.00891829368495e-309, 2.67904643304077e+301,  -1.2683645911815e-30, 9.37339630957792e-312, -5.78534238436574e-34,  2.56647495592844e-301, 4.08272023338859e-311, -2.83427023367766e+306,  534.645996101197, -2.15210897284479e+306, NaN, NaN, 7.19929512000783e-310,  NaN, NaN, 1.08646184497373e-311, 8.97712454626148e-308, NaN,  NaN, -2.82116711389295e-277, 3.41641322410626e-312, 1.08601191821704e-306,  -5.66324542991682e+303, 2.84809454421703e-306, NaN, 1.08646184497373e-311,  -1.00914053742587e-149, NaN, NaN, NaN, 3.78991763884327e-312,  2.88682471019134e-82, -2.35343736825169e-185, -5.34349793087407e-187,  -1.14951281025841e-184, -2.35343736826454e-185, -7.95541638165798e+304,  NaN, -3.66343140921499e-305, 1.67129192796163e-112, -1.26836459270826e-30,  NaN, 6.01362129181413e-317, 2.68465640755973e-312, 0, 3.15073935042524e-310,  9.72926582174422e-309, NaN, 7.17075792708305e-310, 2.6422164151899e-312,  -2.39020910667199e-185), x = c(NaN, 3.78987813636309e-312, -Inf,  -6.29776158777934e+262, -5.48612677708818e+303, 2.72888655986149e-312,  3.66145950596111e-314, -1.2341419504043e-30, -1.80650535611164e+307,  -9.7757963632732e-150, 2.73729184714066e-312, 1.11604253465019e-314,  3.60446694374285e-305, -9.77941371393343e-150, -2.97619001461336e-288,  -9.77818300079457e-150, 7.52609340439459e-304, 1.0172317531792e-309,  -9.77579639463688e-150, -9.77579636327222e-150, 3.65365168861588e-306,  8.28904605845809e-317, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)