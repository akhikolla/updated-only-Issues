testlist <- list(rates = c(-Inf, 1.3854086120054e-309, NaN, -1.26836479922647e-30,  4.94065645841247e-324, -1.2341419504043e-30, 5.80250126937982e-270,  -4.26725654043504e-34, -1.48496851212815e-267, -4.25898785618092e-270,  NaN, 3.00384970898466e-307, NaN, 1.0610066226582e-314, 5.28563687577555e-308,  3.65365169083783e-306, -5.48612677708849e+303, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, 9.70534703828064e-101, 9.70418706716128e-101,  NaN, 3.57826741138282e-315, 9.34700350738556e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 7.91826926828272e-101,  9.70418706716128e-101, 9.70395367084961e-101, NA, 9.67907259811454e-101,  3.57826741138282e-315, 9.34700350738556e-101, -7.22398478008401e-287,  -1.83593063255268e-307, 9.70418706716715e-101, 7.91826926828272e-101,  7.29035368732023e-304, -4.57615391491265e-246, 2.71615461306795e-312,  -4.38889926233518e+306, 2.81218450820696e-312, 7.55038392918931e-15,  -2.18003413361522e-289, 2.84809454421907e-306, 5.5869437297374e-319,  NaN, NaN, NaN, -1.36573625663878e-151, 5.74181509254692e+199,  -2.11852534547344e-289, 1.39067116173399e-309, 0, 0, 0, 9.72926582174422e-309,  -Inf, 2.84347436052587e-312, 2.47222686857108e-94, 6.32404026676796e-322,  NaN, NaN, NaN, -2.97384967519848e-188, -5.66324542991447e+303,  2.84809454421703e-306, 3.78987813636309e-312, 0), thresholds = c(-2.29449120144681e-156,  -2.30331110816477e-156, -1.84314079543842e+306, 7.1987099133561e-310,  NaN, -1.03867836358987e-149, 7.2903536873204e-304, -4.53535975812212e-147,  -1.10310852891461e-146, -1.10310852891461e-146, -1.10310852891461e-146,  -1.10310852891461e-146), x = -5.27931190317285e-148)
result <- do.call(grattan::IncomeTax,testlist)
str(result)