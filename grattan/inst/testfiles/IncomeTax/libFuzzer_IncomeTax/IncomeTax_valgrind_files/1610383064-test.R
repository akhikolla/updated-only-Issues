testlist <- list(rates = c(-5.17512518402944e+245, -Inf, 4.45123395077779e-308,  6.55651541948862e-07, 1.58653735272582e+124, Inf, 9.96833088362618e-306,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, Inf, NaN, 1.36845553142777e-48,  -5.7502851316102e+243, 1.38653691272916e-309, 1.70114806571822e+40,  -3.31521377423868e+118, 6.55651094312864e-07, NaN, NaN, NaN,  NaN, -5.48633958130682e+303, -5.18847371542227e+245, -5.17539168553194e+245,  NaN, 1.31756732478297e-309, NaN, 2.75744471483016e-10, NaN, 3.24181196729963e+178,  3.94213052632413e-259, -8.23127053862787e+304, NaN, -3.01223699592253e-257,  NaN, 2.75744471527062e-10, 3.0517578125e-05, -5.17544608222403e+245,  -1.29568717282844e+164, NaN, NaN, 4.90506746331221e-10, 7.29112200597775e-304,  NaN, NaN, NaN, 3.64556100396923e-304, 3.3300055701919e-309, 7.50963275955378e-308,  1.59070796007927e-310, 1.6525917826537e+40, NaN, 8.28904556439245e-317,  0, 0, 0, Inf, 4.14452302922905e-317, NaN, -8.46678196212304e+245,  -4.0665801005897e+221, NaN, NaN, NaN, -5.06443593276214e+245,  -8.00197165336822e+304, -6.17182154143209e+303, 3.62557269002036e+53,  5.45435836126695e-312, NaN, NaN, -6.3100779998114e-256, 4.65661275987818e-10,  -8.7777985100699e+304, 4.31748707182255e-304, -5.82900682309298e+303,  -5.18846954791325e+245, 0), thresholds = c(4.77831430127978e-299,  -Inf, 2.02566914794911e-322, NaN, NaN, NaN, 7.76462360460874e-304,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NA, -7.31781923598515e+241,  7.29112201886404e-304, NaN, NaN, 4.77947283820032e-299, 1.65276105961175e+40,  1.39785663411574e-304, 1.0429122855008e+40, -6.17322896307206e+303,  NaN, -5.7502866102558e+243, -8.22918610235701e+304, NaN, -5.17512497239813e+245,  0), x = c(NaN, 4.7783097297265e-299, NaN, -2.41844193503962e+24,  2.00134474032677e-256, -1.50465303211442e-43, NaN, 2.79513883427183e-129,  Inf, 5.04042890889458e+180, NaN, -1.29211778498335e+294, 9.36318416482658e-307,  3.28527517407201, -1.01163270339852e+308, NaN))
result <- do.call(grattan::IncomeTax,testlist)
str(result)