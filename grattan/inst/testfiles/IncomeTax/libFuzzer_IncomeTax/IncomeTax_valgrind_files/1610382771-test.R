testlist <- list(rates = c(NaN, NaN, NaN, NaN, NaN, NA), thresholds = c(6.06452378675548e+228,  5.98415352919567e+228, 5.95750278984877e+228, -6.03367097460494e+304,  9.76763793907899e-307, 4.72709871246109e-10, 7.4202234095592e-68,  NaN, NaN, -5.06443593278922e+245, NaN, NaN, 5.14674736242857e-312,  NaN, -1.37153101719842e+305, 7.29112201953008e-304), x = c(NaN,  6.64032995770279e-07, NaN, 7.87902392938814e-308, 4.01378017054772e-297,  1.42943178999697e-101, 4.07221237780293e-308, 0, 0, 0, 0, 0,  0, 4.77830972673648e-299, 1.13203791517755e-72, NaN, 0, 0, 0,  0, 2.84809453888922e-306, 0, 0, 0, NaN, 1.25986739689518e-321,  NaN, NaN, -1.18182171214456e-125, 7.29111854342396e-304, 5.95750278984877e+228,  2.44182222966531e-306, 5.95750278982956e+228, 2.78910999442478e+132 ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)