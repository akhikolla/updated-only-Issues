testlist <- list(rates = NaN, thresholds = c(-2.17472828339481e-272, -2.17472828339481e-272,  -2.17472828339481e-272, -2.17489818144947e-272, -2.17472828339481e-272,  -2.17472828339481e-272, -2.17472828339481e-272, NaN, -3.67243182468058e-306,  2.87903828240055e-306, -1.14095308127532e+306, 2.64867333855361e-305,  -2.82149851225675e-277, 7.19870991012477e-310, NaN, 3.78576699573368e-270,  7.29112072938316e-304, NaN, NaN, NaN, 7.29112200597562e-304,  NaN, 5.43230922486616e-312, 2.12199579047121e-314, 0, 1.39348334607445e-309,  3.66148293307183e-314, -1.2341419504043e-30, 3.66343140688495e-305,  -2.27033659542473e-156, -6.05390363808932e-157, -2.30331110816477e-156,  -1.32083970121448e-284, 3.65207087186091e-306, 3.83698199955456e+117,  7.29069965756742e-304, 2.84809454421762e-306, 0, 8.44254251528635e-227,  3.8004944616188e-311, NaN, 7.17719822995867e-304, -3.01441880984572e-305,  -1.41042199453345e-231, -9.77579638261926e-150, -5.08189403532328e-306,  3.00089887426119e+284, 0, 4.94065645841247e-324, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, -1.26836479922652e-30,  -3.10267783351777e-277, -1.24236399411323e-30, -1.26836459270829e-30,  3.78576699573368e-270, Inf, 8.27241580881908e-317, 9.23492568228087e-311,  5.79909433230408e-316, 1.44804023176556e+190, -1.75590191507535e+306,  -2.11940804072454e-289, 5.41494189803772e-312, -Inf, -2.18357274366651e-289,  9.70418614815292e-101, 8.02711540254363e-125, 9.70418706716128e-101,  -3.72626152437281e+304, -2.30328334270593e-156, -2.30331110816477e-156,  -1.38524951400572e-309, 1.26822404694409e-314, 7036874417766.4,  -2.35343736826454e-185, 7.17736025324585e-310, 7.32777351949015e-15,  NaN, 0, -2.18053517568976e-289, 7.29112204677287e-304, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)