testlist <- list(rates = c(NaN, NaN, Inf, NaN, 0), thresholds = c(-5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, 1.60559212927429e-146,  -1.82724810416579e-305, 2.9621337120295e-306, -2.2962031506993e-156,  -2.30331110816477e-156, -2.30331110816477e-156, NaN, -5.32245148160694e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -1.46889178304203e-110, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.71336793340794e+303, -5.46382737282296e-108,  -1.38123419994191e+306, -5.46354798984065e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, 1.82724810416579e-305,  NaN, 7.00766563760997e-310, 2.72974914124656e-312, -Inf, -2.30331110816477e-156,  -2.30331110816477e-156, 4.65661203714475e-10, -5.46354474764561e-108,  -5.46354690059085e-108, -5.46354689218091e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46310509567581e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, -1.79769313486231e+308, NaN,  NaN, NaN, NaN, NaN, NaN, -3.4288275348529e+304, NaN, NaN, NaN,  -5.48746345455267e+303, NaN, 2.12199579047121e-314, NaN, -Inf,  NaN, NaN, NaN, 3.02540782814362e-306, -3.01406960140899e-135,  3.66343140688495e-305, -3.85185988877447e-34, -8.81443176193936e-280,  -3.97083461829693e-34, -1.26836459270827e-30, 1.43026673502722e-316,  -1.26823091051179e-30, 2.33385326930198e-301, -2.97619001462835e-288,  -2.9718420926367e-147, 7.52609340439459e-304, NaN, -9.77818300079457e-150,  -9.77579636327222e-150, 3.65365168861588e-306, 0, 0, 9.23492568228087e-311,  5.79909433230408e-316, 6.95346190762455e-310, -6.56725888211742e-287,  6.96279910522665e-310, -1.09415610340935e-314, 1.26822404694409e-314,  0, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)