testlist <- list(rates = c(-3.9759940224262e-34, -1.26823100659151e-30, -1.26836459270829e-30,  2.39422219319154e-301, -2.30331110816477e-156, -6.05390363808932e-157,  -2.30331110816477e-156, NaN, NaN, 7.00747333174142e-310, 7.37818343015736e-301,  -2.30331110545783e-156, -2.30331110816477e-156, -2.30331110816272e-156,  -5.5516993870748e+306, 4.65661286890991e-10, NaN, NaN, 7.29112072943601e-304,  -3.04032340824977e-288, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  -5.29946982737798e-169, 7.51897652547993e-304, -2.97578962378101e-288,  -8.81442986741218e-280, 7.74565138159227e-304, 7.74503710032839e-304,  -9.51980735528282e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -7.39330449774053e-287, 7.19919233907466e-310, -7.55234771438901e-287,  NaN, NaN, 4.77830972673648e-299, 2.31058199965605e-138, 9.70418708477793e-101,  9.70418706716128e-101, 9.70418696071228e-101, 3.80916963432752e+117,  NaN, 5.43230663453926e-312, 0, 0, -9.77580118946814e-150, 5.8536377186878e+170,  5.39907627431893e-310, 5.85363771174557e+170, 2.8480955933963e-306,  7.10613482629917e-15, 6.52166652510445e-322), thresholds = c(9.70418706716128e-101,  NaN, -7.89644244641853e-84, -7.89695893725448e-84, -7.89695893725448e-84,  -7.89695893725448e-84, -7.89695893725448e-84, NaN, -7.89695893725448e-84,  -7.89695893725448e-84, -7.89695893725448e-84, NaN, 120006439.5,  2.84878781201556e-306, 7.10591798586467e-15, -2.25769375781368e-289,  3.65207086127239e-306, NaN, NaN, NaN, NaN, NaN, -3.84028684815558e+304,  NaN, 7.52702515422929e-304, -9.77579636319873e-150, 0), x = c(-7.05164812869171e-279,  6.96279911813565e-310, 9.70418706716143e-101, -9.77580118946814e-150 ))
result <- do.call(grattan::IncomeTax,testlist)
str(result)