testlist <- list(rates = c(-7.2239847844844e-287, NaN, NaN, -3.24370864413212e-277,  -3.17678814184056e-277, -3.17678814184056e-277, -3.17678814184056e-277,  7.19919234077613e-310, -2.97619001462835e-288, -3.17678814422824e-277,  -3.17678814184056e-277, -1.26836459212055e-30, 4.00930495879766e-306,  -1.26826378018642e-30, 3.94108708470682e-312, 2.92300471201586e+48,  3.78576699211193e-270, 7.29112072938316e-304, -3.04032340824977e-288,  2.72784216611317e-312, 2.64868533186271e-305, -2.82149851225675e-277,  7.19870991012477e-310, NA, 4.77830972673648e-299, 1.21044018122494e-305,  -2.821380993339e-277, -2.30331110816477e-156, -2.2604631322191e-289,  8.30580772955891e-317, -1.05648156144933e+270, NaN, NaN, NaN,  NaN, -2.25769487148829e-289, 3.65207086127239e-306, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, 2.8121845074461e-312, -2.23033286481164e-289,  8.30580772955891e-317, -1.05648156144933e+270, NaN, NaN, NaN,  NaN, -1.36573625540515e-151, NaN, 2.47206455974908e-94, -7.17064817683617e-310,  1.11073217183338e-314, -7.39330450729745e-287, NaN, NaN, NaN,  NaN, -2.05251892169442e-289, 1.04571740535056e-308, -3.02879630252661e-288,  -7.92736885185452e-308, -2.93709766298917e-306, 0), thresholds = c(-6.05390363808932e-157,  NaN, -1.32083970121448e-284, 3.65207087186091e-306, NaN, NaN,  NaN, 7.73071190387239e-12, NaN, -6.05898824717554e-65, -4.38889925902529e+306,  4.5113879864095e-10, NaN, NaN, -9.77817400064824e-150, 7.2903536873204e-304,  NaN, -2.31270004112258e-156, -2.30331110816477e-156, -1.84314079543842e+306,  7.1987099133561e-310, NaN, 3.78576699573368e-270, 7.29112072938316e-304,  -3.04032340824977e-288, 1.92493542926894e-301, NaN, 5.43230922486616e-312,  3.78987813636309e-312, 3.65365169083783e-306, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, 0), x = c(2.47192511529499e-94,  2.71615461306795e-312, 1.28823036902948e-231))
result <- do.call(grattan::IncomeTax,testlist)
str(result)