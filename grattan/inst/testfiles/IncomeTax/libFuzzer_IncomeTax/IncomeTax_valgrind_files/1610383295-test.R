testlist <- list(rates = c(NaN, 2.12199579047121e-314, 0, 0, 0, 0), thresholds = c(1.42991535880121e-308,  1.390671161567e-309, -6.31007776155415e-256, -2.9485516267944e-124,  1.42991746741254e-308, 1.39113377772151e-308, 1.70141080425748e+40,  5.43265613443585e-311, NaN, NaN, 3.0517578125e-05, NaN, -8.73989987741882e+245,  NaN, 4.77830972671026e-299, -3.23461733568609e+244, NaN, NA,  -5.17539169214856e+245, 7.29041973061971e-304, NaN, -1.33360312504275e+241,  Inf, 4.65661287307739e-10, 2.12455197126622e+183, -7.72583421873422e+306,  NaN, NaN, -5.66347311684925e+243, 4.77830972972668e-299, -1.33009567995099e+305,  5.54095540936847e-310, -1.1255454651159e-256, 3.6806986859005e+180,  1.71721740627347e+262, NaN, 9.71367150253454e-318, 0, 0, Inf,  NaN, 8.28904556439245e-317, 0, 0, 0, 0, 1.6189543082926e-319,  0, 0, 0, 2.12199579047121e-314, NaN, NaN, NaN, -8.73989987746428e+245,  NaN, 5.14674736242857e-312, 1.04294967099682e+40, 5.22277776582315e-10,  1.08646184497373e-311, NaN, NaN, NaN, 7.2911220195564e-304, NaN,  -5.06443593276214e+245, NaN, NaN, NaN, 1.77886331664694e+179,  3.94213052632413e-259, 1.97498519159721e+166, -3.3755488846838e-161,  2.78348555323592e-309, -1.93372419505209e+242, 1.63335553564935e+40,  9.48135689520352e-318, 0, 0, -6.03473229009256e+304, 0), x = c(Inf,  6.64032995770279e-07, NaN, NaN, NaN, NaN, NaN, NaN, -5.1071114359872e+245,  -5.54792475454324e+243, NaN, 5.54095540936847e-310, -1.1255454651159e-256,  4.77793833555639e-299, 2.78134232318839e-309, -3.45507950618034e+304,  NaN, 4.46014691294146e+43, -8.4070565483332e+304, 1.42943179159788e-101,  NaN, 6.64032995703601e-07, 1.39113490711204e-308, Inf, -1.12554546352376e-256,  NaN, NaN, 3.05175781249991e-05, 7.4202234095592e-68, NaN, NaN,  9.36270004077441e-307, 1.08729903862711e-311, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)