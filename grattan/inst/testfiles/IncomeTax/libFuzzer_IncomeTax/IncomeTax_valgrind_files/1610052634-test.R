testlist <- list(rates = c(NaN, 9.70418614810987e-101, Inf, -1.24255658710767e-30,  Inf), thresholds = c(-0.000567626953125, -2.35343736826454e-185,  7.32777351949039e-15, -8.22918610319053e+303, 4.46108959687689e-140,  3.60297094497336e-306, -1.06556334613796e-314, 9.7020880290895e-310,  -7.39330493781016e-287, 2.81199605863994e-312, NaN, -8.22918610319053e+303,  4.46108959687689e-140, -1.40444775900542e+306, NaN, 7.2911220195564e-304,  -1.28189897097266e-30, 7.27950633336389e-310, -5.66324542991447e+303,  -1.12858219058046e-276, -7.3933019237596e-287, 5.85318274554714e+170,  5.85363771868791e+170, 7.84460841921515e+168, NaN, NaN, NaN,  NaN, -7.40507430179044e-171, 2.8487888201287e-306, 7.10591798586467e-15,  6.22974269997644e-316, 8.44254251528635e-227, 3.8004944616188e-311,  -6.953355807835e-310, 1.11073217183338e-314, -7.92737104019607e-308,  -7.3933019237596e-287, -2.25739033689687e-277, -2.11940804072442e-289,  2.72810281967378e-312, -2.83427023367766e+306, 534.645996101197,  -8.81442988344573e-280, -1.26834825275039e-30, 1.53948714210656e-314,  -1.26836404691013e-30, -2.82145547645118e-277, -1.2437121450743e-30,  -1.26836459270829e-30, 3.78576699573368e-270, 1.00891829346111e-309,  3.21619919819582e-314, -1.26836404691013e-30, -2.82145547645118e-277,  -1.2437121450743e-30, -1.26836459270829e-30, 3.78576699573368e-270,  1.00891829346111e-309, -7.40305869888926e-171, 7.51897652547993e-304,  -2.97578962378101e-288, -9.77719778887253e-292, -2.20216447764871e-289,  7.57771153258705e-304, 7.29112549639615e-304, 7.74565263102353e-304,  -1.3906499427506e-309, NaN, NaN, -2.11940804072454e-289, NaN,  -1.06516533278245e-314, -5.69829962335073e-306, 0, 9.6439561139442e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 2.34505333126984e-310, 2.67904644895999e+301,  -1.26836459117002e-30, 1.38540861191652e-309, NaN), x = c(NaN,  NaN, -1.26823093099111e-30, -2.24767623012983e-289, -1.24371214513728e-30,  -1.26836459270829e-30, 3.78576699573368e-270, -1.26836459270033e-30,  -1.24351955275956e-30, -1.26836459270829e-30, 8.81442566340249e-280,  -2.82145547645109e-277, 1.67129192517088e-112, -1.26836459270826e-30,  3.66343140688487e-305, 3.22048866822797e-314, 3.60739284464096e-313,  2.26527122355628e-318, 8.54602158179859e+194, 7.18076182606196e-304,  -1.90877083252545e-287, 7.41606077195142e-310, -1.74162172578232e-248,  7.20047258077813e-310, 3.98264587882868e-317, 8.28904605845809e-317,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 3.7835305088198e+117,  -1.97637754038728e+306, NaN, -2.52435489670724e-29, -1.53948714210656e-314,  1.06099789548264e-314, -Inf, -1.26836459270827e-30, -2.0562923949346e-289,  2.01187493379513e+289, -1.26836459270831e-30, 1.00891829368586e-309,  2.92300606789188e+48, -4.94065645841247e-324, 0, 0, 9.6439561139442e-101,  9.70418706716128e-101, 9.70418706716128e-101, -4.94065645841247e-324,  9.70418706716128e-101, 9.70418706716128e-101, 3.73812137671301e-306,  1.39067112214736e-309, 4.77830972673634e-299, 2.74732738226446e-282,  -6.36390391980068e+305, 3.65207087186091e-306, 4.13847488209677e+96,  1.27741322615321e+238, 1.17233881301217e+214, 1.68048229123605e+117,  1.5319122082349e-94, 3.43532093408252e+228, 9.70418706718248e-101,  9.70418706716128e-101, 1.39776062458382e-317, 1.55587395324171e-59,  -1.80650535611164e+307, NaN, -4.94065645841247e-324, NaN, -2.52435489670724e-29,  0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)