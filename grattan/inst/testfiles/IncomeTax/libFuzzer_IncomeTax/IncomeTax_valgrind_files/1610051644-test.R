testlist <- list(rates = c(5.85363771174557e+170, 2.8480955933963e-306, 7.10613482629917e-15,  2.71677758670555e-312, -2.35343736826454e-185, -2.35331532831998e-185,  -2.35343736826454e-185, 3.58211230559749e-306, 2.87903833031139e-306,  -2.97578981950056e-288, 1.99457210545293e-139, -1.26836459270154e-30,  5.5869437297374e-319, 9.70418706714985e-101, 9.70418706716128e-101,  9.70418706716128e-101, 5.01070544779247e-306), thresholds = c(2.00877667922349e-139,  1.3862250937717e-309, 2.36292526340207e-94, 8.4309447666278e-309,  NaN, NaN, NaN, NaN, NaN, NaN, 7.09876007659596e+132, 2.00877667922349e-139,  1.99442574759722e-139, -2.05227035158757e-289, 2.87903573600567e-306,  Inf, -5.48681743872656e+303, 3.65398847701729e-306, NaN, NaN,  2.781342323134e-309, 8.35872426077374e-77, 2.00877667924448e-139,  2.00877667922349e-139, 5.41494177254505e-312, -2.24794781394868e-289,  1.04869390894441e-314, 5.85363771866079e+170, 8.62805110310557e-307,  NA, -2.10901416965392e-312, -1.06436544692469e-314, 2.03189331491203e-139,  5.59610394430542e-275, NaN, 7.27929436294622e-310, -2.93988024154063e-306,  -2.06028507410418e-289, -2.87284971981314e-188, 0, 4.53801546776667e+279,  -1.06597124722923e-314, -2.11852534546502e-289, 0), x = c(5.14291266320765e+25,  5.14291266320765e+25, 5.14291266320765e+25, -2.30331110816477e-156,  -Inf, -2.30331110816274e-156, -5.5516993870748e+306, 4.65661286890991e-10,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  -5.96890832411666e+306, 1.390652843099e-309, 6.68177101684135e-310,  1.390671161567e-309, 0, -Inf, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  -3.85185988877447e-33, -1.26836459270829e-30, 2.1788294981599e-321,  2.8142140374651e-312, 1.28854363213928e-231, -5.48681743872625e+303,  -3.65398847701729e-306, 3.83677401710034e+117, -3.15108981300296e-248,  NaN, 2.56647495783721e-301, 5.83649238196789e+280, Inf, -1.26822491539877e-30,  8.24445099066359e-312, -9.11306812174856e-306, 8.34402647205924e-310,  -7.92682562887111e-308, -2.82116724839022e-277, NaN, -2.82116819422416e-277,  3.2444302831103e-319, NaN, NaN, NaN, NaN, NaN, NaN, 2.81218450766349e-312,  5.85363771866079e+170, 8.62805110310557e-307, -4.25550648705951e+305,  Inf, NaN, NaN, NaN, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)