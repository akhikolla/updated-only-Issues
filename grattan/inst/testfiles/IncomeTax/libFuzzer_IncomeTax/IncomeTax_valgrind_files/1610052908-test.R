testlist <- list(rates = c(-1.26836407051221e-30, -9.36473653341481e-280,  -3.04032340213361e-288, 2.56647495438759e-301, 5.67865049362949e-270,  8.63073241202149e+115, -2.82116785652972e-277, NaN, 7.73071190387239e-12,  1.21044017902795e-305, 7.19919234034436e-310, 3.23790861658519e-319,  0, 0, 3.60739284464096e-313, 2.26527122355628e-318, 8.63073241202148e+115,  1.34883621774207e+188, 6.95335580945925e-310, 3.65784677466498e-306,  -3.1845552891024e-248, 1.80354409094537e-130, -1.23416654681407e-30,  -1.26836459270829e-30, -7.2239847844844e-287, 4.94065645841247e-324,  8.61149315118366e+115, -1.97637753174225e+306, 1.25986739689518e-321,  1.55419613596089e-317, 0, -2.8730072561101e-188, 9.11389926506012e-306,  3.44571489180014e-94, -2.18056649082045e-289, 7.19919234075083e-310 ), thresholds = c(2.7274719232983e-312, 3.66145950596111e-314,  -1.2341419504043e-30, -1.80650535611164e+307, -9.7757963632732e-150,  2.73729184714066e-312, 1.11604253465019e-314, 3.60446694374285e-305,  -9.77941371393343e-150, 2.33246235504083e-12, -2.15995069167566e-277,  -5.69758255001719e-306, 7.29111937478047e-304, -3.04032340824977e-288,  7.84460841917251e+168, 2.81218450794511e-312, 1.26480805335359e-321,  0, 0, 1.40913782993788e-315, 8.84871571701673e-321, -8.81442986651231e-280,  -2.11866430635714e-289, 1.06243882805742e-314, 0, 1.93515632163099e-319,  NaN, -2.29827893752624e-185, -2.35343736826454e-185, NaN, -2.36696135798219e-185,  9.1139025244455e-306, 7.29112028357827e-304, 4.51166215494845e-10,  NaN, NaN, 2.81199605989981e-312, 0, 4.94065645841247e-324, NaN,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, -2.52435489670724e-29,  1.53948714210656e-314, 8855257104.81543, -9.26741376023351e-185,  -2.84851174023769e-306, -1.23273488873455e-30, 1.11688277665699e-308,  -2.97590504692468e-288, 1.53949596562493e-314, 2.56647495437475e-301,  3.65365168447616e-306, 7.54951658409807e-15, -2.30331131488469e-156,  -2.29449120144681e-156, 3.65207087186085e-306, -5.46354690059072e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -1.36588672514113e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, NaN, NaN, NaN, NaN, NaN, -1.34497461904945e-284 ), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)