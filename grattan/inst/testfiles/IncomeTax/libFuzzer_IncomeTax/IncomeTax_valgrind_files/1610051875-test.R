testlist <- list(rates = c(-Inf, 3.6634314009933e-305, -9.77941371393343e-150,  2.33246235504083e-12, -2.15995069167566e-277, NaN, 7.29111937478047e-304,  -3.04032340824977e-288, 7.84460841917251e+168, Inf, 0, 0, 1.40913782993788e-315,  8.84871571701673e-321, -8.81442986651231e-280, -2.11866430635714e-289,  1.28823036902948e-231, 6.95335580950455e-310, -Inf, NA, 6.98594916738453e-310,  0), thresholds = numeric(0), x = c(-Inf, NaN, 1.91777968406795e+289,  1.425439003045e-308, 2.87903573596529e-306, 2.39577701417595e-309,  NaN, 2.84809650943276e-306, 7.10613482629917e-15, 3.56117747391046e-306,  2.39958939755014e-309, 4.35857935464267e-311, 3.56048353890995e-306,  -5.81587851513041e-34, -1.26836459270829e-30, -8.81443176193936e-280,  -1.83255064810381e-06, 6.99383183735361e-310, 8.53111842806076e-85,  1.91777968406795e+289, 1.425439003045e-308, -1.832550647202e-06,  -1.83255064721201e-06, -1.83255064721201e-06, -1.83255064721201e-06,  -1.83255064721201e-06, -1.8169509940872e-06, -1.83255064721201e-06,  NaN, -6.85765475899363e+303, 4.46108959687689e-140, NA, NaN,  NaN, NaN, -9.77818303223272e-150, NaN, NaN, NaN, NaN, NaN, NaN,  NaN, 3.66343140689406e-305, -2.11967030492847e-289, -1.26836419890938e-30,  4.92150938103716e-303, 3.65365168451857e-306, 2.8480945455619e-306,  7.10613482629917e-15, NaN, NaN, -2.11965588219791e-289, -1.83593039382815e-307,  -2.6064446869563e+304, -Inf, 2.84809454421703e-306, 3.78987813636309e-312,  3.65365169083783e-306, 2.8480945455619e-306, -5.48612677708818e+303,  2.72888655986149e-312, 3.66145950596111e-314, -1.2341419504043e-30,  0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)