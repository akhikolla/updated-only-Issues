testlist <- list(rates = c(3.65365168861588e-306, 0, 0, 5.59610256518376e-275,  0, 7.27929436294622e-310, -2.93988024154063e-306, 1.6211281971343e-319,  -2.87284834993229e-188, 0, 4.53801546776667e+279, 2.09688202051272e-309,  NA, -8.02506476812756e+304, 1.390652843099e-309, -5.16216864106284e-306,  NA, -1.85907762421774e-183, -9.77580118946814e-150, 3.65365168861588e-306,  -9.19490323621235e-186, -3.97223051032683e-34, 2.1788294981599e-321,  -1.26836459066847e-30, 3.91682458094239e-306, 3.60297094493192e-306,  -3.01363922187477e-135, 3.65365168861588e-306, -8.81443174834308e-280,  3.41641371420455e-312, NaN, 3.56048348188083e-306, 34082834.0004893,  NaN, 2.80614289249855e-312, -2.2308331518689e-289, 1.39067116173462e-309,  0, 0, 0, 9.72926582174422e-309, 2.84809453888922e-306, 2.84347436052587e-312,  2.47222686857108e-94, 6.32404026676796e-322, 8.90029543402881e-306,  0, 2.31407681284749e-306, 33554432.062793, 1.84870553760557e-272,  2.30127027866676e-12, 3.652069863913e-306, -7.39330693410405e-287,  -1.33453641541175e-314, 5.67154552225164e-310, NaN, NaN, 3.66343140688495e-305,  7.17065483396996e-310, 0), thresholds = c(7.10613482629917e-15,  5.67154552225164e-310, 1.84870592875683e-272, -1.26836452888031e-30,  NaN, -1.26836407059221e-30, -2.8214554825258e-277, -1.26826829408497e-30,  2.40086640681612e-300, 5.67865049360052e-270, -1.26836459270826e-30,  -1.26826754177099e-30, 2.40086640681612e-300, NaN, -7.40367656369217e-171,  7.51897652547993e-304, 3.93311962729126e-310, 1.02270928517399e-14,  -8.81442989915646e-280, 3.78576700315105e-270, 1.00666897792269e-309,  1.21044182572191e-305, 7.60523338922675e-310, NaN, -2.11965588216793e-289,  -1.83593039382815e-307, -2.6064446869563e+304, 7.18372580480888e-310 ), x = 5.85318274554714e+170)
result <- do.call(grattan::IncomeTax,testlist)
str(result)