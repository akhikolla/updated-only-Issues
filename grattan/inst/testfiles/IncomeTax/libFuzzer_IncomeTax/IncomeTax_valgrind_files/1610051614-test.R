testlist <- list(rates = c(NaN, -Inf, 4.00791842555784e-306, -1.2683642165418e-30,  2.39958945525286e-309, 5.68604456976406e-270, -7.39330555877084e-287,  NaN, NaN, NaN, NaN, -2.05251892169442e-289, -1.26841670960965e-30,  -7.2239847844844e-287, NaN, NA, NaN, NaN, NaN, -9.77818300079457e-150,  2.94613684519112e-306, 6.95335622228731e-310, 8.53111842806076e-85,  1.91777968406795e+289, 1.425439003045e-308, NaN, 1.08646184497373e-311,  1.38622512578319e-309, 2.4692825238425e-94, 2.81218450808344e-312,  7.55038392918931e-15, 1.84870553760562e-272, NaN, 4.92150879737264e-303,  -1.26836452888033e-30, NaN, -1.26836407059221e-30, -2.8214554825258e-277,  NaN, 2.40086640681612e-300, 5.67865049360052e-270, -2.82156678760535e-277,  NaN, NaN, NaN, NaN, 6.95335581431077e-310, 0), thresholds = c(5.67865049360052e-270,  Inf, -2.30331110816476e-156, -Inf, -2.29449120144681e-156, -2.30331110816477e-156,  -1.84314079543842e+306, 7.1987099133561e-310, NaN, -1.03867836358987e-149,  7.2903536873204e-304, -4.57615391491265e-246, -2.24767481577173e-289,  7.54951658409808e-15, -3.1315127781037e-294, 3.56047671159453e-306,  -8.02506476812756e+304, 1.390652843099e-309, 4.28183424758689e-317,  -7.39330388852429e-287, 0, 1.26480805335359e-321, 2.3641409746639e-308,  1.48456814906984e-313, -Inf, NA, 2.71615477433098e-312, -4.18023207308323e+304,  6.66135840747845e+286, 1.29145347579917e-231, -8.06310497168395e+303,  -4.24399158143648e-314, Inf, 0), x = c(NA_real_, NA_real_))
result <- do.call(grattan::IncomeTax,testlist)
str(result)