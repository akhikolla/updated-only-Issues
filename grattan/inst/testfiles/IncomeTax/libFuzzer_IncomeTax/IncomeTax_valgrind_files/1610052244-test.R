testlist <- list(rates = c(-5.35044484234063e-108, Inf, NaN), thresholds = c(Inf,  NaN, -7.40367655599102e-171, 7.51897652547993e-304, -2.97578962378101e-288,  6.13636683160053e-92, -1.36573625663876e-151, 5.74181509254692e+199,  -2.11852534547344e-289, -1.36573625663874e-151, 5.74181509254692e+199,  5.8536377186805e+170, -3.53470696404784e-147, -2.84809453891061e-306,  5.14291254404409e+25, 1.33887524704851e-314, 0, 0, 0, 5.59610256518376e-275,  -5.48612406879369e+303, NaN, -7.92736885185452e-308, 2.4719252581509e-94,  -9.77579638261926e-150, -5.08189403532328e-306, 3.00089887426119e+284,  0, 4.94065645841247e-324, NaN, NaN, NaN, NaN, NaN, NaN, -2.35343653208927e-185,  -2.35343736826454e-185, -2.35343736826451e-185, 3.58211230561158e-306,  2.87903833031139e-306, -1.84912264488976e-248, NaN, -2.82145547645121e-277,  1.67129192517088e-112, -1.26836459270826e-30, 1.00891829368586e-309,  1.25800338602655e-316, 6.98594916584147e-310, -9.77580118946814e-150,  7.29112485532916e-304, 3.65365168445792e-306, -5.77662200276729e-275,  8.63073241202171e+115, -2.82116926034698e-277, 3.23785921002061e-319,  5.85363771870637e+170, 0, 0, 5.59610256518376e-275, -5.48612406879369e+303,  NaN, 1.24984532467585e-316, -5.69758254997445e-306, 7.29111937478047e-304,  -3.04032340824977e-288, 2.72784216611317e-312, 2.64868533186271e-305,  -2.82149851225675e-277, 3.41641322410626e-312, 7.19870908769578e-310,  2.56647495438759e-301, -2.18103493600849e-289, 8.2889857824493e-317,  0, 2.56647495436053e-301, -3.01363922187472e-135, -2.30331110816476e-156,  -2.30331110816477e-156, -2.29449120144681e-156, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)