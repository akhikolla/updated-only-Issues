testlist <- list(rates = c(-Inf, -5.10711120890342e+245, NA, 9.55008712236373e+139,  9.1245883769185e-313, -1.45094702116227e+128, -Inf), thresholds = c(NaN,  NaN, NaN), x = c(NA, NaN, NaN, 1.8292213616808e-260, NaN, NaN,  5.43818615865253e-311, -3.5510117602496e+307, NaN, 1.39782377108199e-304,  NaN, NaN, -8.4070565320089e+304, -2.33589462432874e-310, 2.11221420313404e-106,  -5.49989590899971e+303, 3.13667378958624e+151, 1.78880049691429e+161,  -Inf, 8.90389806611905e+252, 4.73786337004843e+164, 1.39610342301177e-309,  1.87427653306603e+40, NaN, -6.3100779998114e-256, NaN, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)