testlist <- list(rates = c(-2.83637103417778e-124, 1.71272844748826e-260,  -3.14666901810749e+53, 7.23040374413963e-308, NaN, NaN, -5.17495827121042e+245,  NaN, 1.19480215218e+183, -5.1754460659447e+245, NaN, NaN, -1.18182171214456e-125,  NaN, -5.7502866102558e+243, -5.06443614361371e+245, -1.45099822316707e+128,  5.54095540936778e-310, -1.1255454651159e-256, 3.6806986859005e+180,  1.71721740627347e+262, 4.87620583420803e-153, 9.34531020883862e-307,  4.7702837785253e-299, 9.12483869903286e-313, 1.04294967003024e+40,  3.46881957639467e-164, 1.08729903862612e-311, 3.37207710545706e-307,  -3.5670521533231e+304), thresholds = c(Inf, NaN, NaN, 4.65661287307739e-10,  NaN, 3.24260049547299e+178, 1.04291229360581e+40, 4.86173068579365e-63,  -Inf, 9.75584653612141e-259, -6.03473647567281e+304, 4.45998517039374e+43,  -2.83637103417778e-124, 1.71272844748826e-260, -3.14666901810749e+53,  7.23040374413963e-308, 5.48881419689231e-310, -1.1255454651159e-256,  3.6806986859005e+180, 1.71721740627347e+262, 4.87620583420803e-153,  9.34531020883862e-307, 4.7702837785253e-299, 9.12483869903286e-313,  NaN, 2.18053507627829e-289, NaN, NaN, -1.4509988461317e+128,  NaN, -5.17539189176135e+245, 9.58542700017712e-307, -3.14666901810749e+53,  1.04294967409433e+40, 6.80571226377258e+38, 1.51189165578349e-304,  6.55651167129346e-07, -5.8290068026591e+303, -8.52438965099359e+245,  NaN, 1.7127284533022e-260, NaN, 5.51611724076149e-310, -5.82900682309329e+303,  -8.72597601819529e+245, 3.06730931775504e-301, 8.04398474339347e+55,  2.74837317429499e+228, 6.55651545542099e-07, -Inf, -8.46814612596069e+245,  2.38744664558775e-310, 2.70150095835327e-307, -3.42882754431144e+304,  NaN, NaN, NaN, NaN, NaN, 3.32653163546258e-111, NaN, 4.65661287307739e-10,  NaN, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)