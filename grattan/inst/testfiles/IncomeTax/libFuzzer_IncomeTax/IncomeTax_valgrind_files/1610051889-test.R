testlist <- list(rates = c(NaN, 2.84915519733288e-306, 3.78576699573368e-270,  -2.11940804072449e-289, 7.26263955508388e-304, -6.69969684636807e-287,  9.83445401215712e-101, -7.3933027686541e-287, 5.4323092248711e-312,  2.332463439243e-12, 9.70418706716148e-101, 9.70418706716127e-101,  9.76721945630585e-101, NaN, -7.39330693410434e-287, 7.19919233907466e-310,  NaN, 9.70418696071228e-101, 7.55652533908718e-308, 9.70418706357123e-101,  9.70418706716095e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706715965e-101, 7.14190359018359e-304,  -3.13227758653431e-294, -9.77719780333789e-292, -9.77719780333789e-292,  3.78576699573368e-270, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, 2.81218450809827e-312, NaN, 8.62805110310557e-307,  -4.25550648705951e+305, NaN, NaN, NaN, NaN, -1.36573625663878e-151,  5.74181509254692e+199, -4.93257619783617e-299, 3.56048348188099e-306,  34082834.0004893, NaN, NaN, 6.95335580946088e-310, -2.87285026134096e-188,  7.19919234102242e-310, 7.51896958273426e-304, 7.06327446347525e-304,  -1.06597131244589e-314, 1.43025759481277e-316, -1.26823091051179e-30,  7.22857562968275e-304, 7.73070496507011e-12, 0), thresholds = c(-2.35343736826454e-185,  -4.27803982342683e-317, -5.46319390889384e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -1.26418166640616e-30,  3.94108708470682e-312, -1.26822486837899e-30, -2.24767481577173e-289,  -4.95400484443369e-33, -1.26836459270829e-30, 2.1788294981599e-321,  3.6634314009933e-305, -9.77941371393343e-150, 2.33246235504083e-12,  -3.01363922187474e-135, 9.33541307720782e-301, 1.21044018122494e-305,  -5.21531605337707e+73, -2.97184209090261e-147, 7.52609340439459e-304,  NaN, NA, -9.77579636327222e-150, 3.65365168861588e-306, 0, 0,  9.23492568228087e-311, 5.79909433230408e-316, 6.95346190762455e-310,  -6.56725888211742e-287, NaN, -1.09415610340935e-314, 1.26822404694409e-314,  0, -9.11307071058342e-306, 7.22992732832208e+221, -2.30331110816272e-156,  -5.5516993870748e+306, 4.65661286890991e-10, 4.77772643699291e-299,  4.29105301847264e-317, 7.73070496506989e-12, 7.29035648822316e-304,  -7.29023378594445e-304, 2.64121166339307e-301, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)