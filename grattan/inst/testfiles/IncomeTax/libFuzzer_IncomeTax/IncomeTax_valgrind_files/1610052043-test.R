testlist <- list(rates = c(0, 7.74503708669187e-304, -9.51980735528282e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333789e-292,  9.82745041327995e-101, 2.81218450766349e-312, 8.2863938883057e-312,  NaN, -9.77719780327796e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -2.82126001103731e-277, -1.39408757479111e-309,  -1.24267801634966e-267, NaN, 4.65661287305794e-10, NaN, NaN,  NaN, 1.25986739689518e-321, 0, 0, 1.42873423910284e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101), thresholds = c(0,  -2.30331110697354e-156, NaN, 1.29035286663029e+214, 5.17222103657198e+160,  3.93750549037925e+92, 3.60297094826183e-306, -1.06556334613796e-314,  9.7020880290895e-310, -7.39330493781016e-287, -2.30331110816477e-156,  -2.30331110816272e-156, -2.30331110816477e-156, -2.30327665540415e-156,  -8.67124371330009e-310, 5.67154552225164e-310, -5.48612407015086e+303,  2.96439387504748e-323, 3.91612999628811e-306, -3.56047810653759e-306,  2.22507386265735e-308, 2.71615461308772e-312, 7.55920438137107e-322,  0, 2.72888639350958e-312, 3.60253364404992e-306, -2.11852534546587e-289 ), x = 3.78573811262366e-270)
result <- do.call(grattan::IncomeTax,testlist)
str(result)