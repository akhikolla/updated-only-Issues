testlist <- list(rates = c(9.14021444806306e-322, 9.14021444806306e-322,  -1.26836459270829e-30, 2.1788294981599e-321, 3.6634314009933e-305,  -1.23288706764201e-30, NaN, 1.00891829346114e-309, -2.11966640218436e-289,  -1.26836459123889e-30, 9.37339630957792e-312, -5.78534238436574e-34,  -1.26836459270829e-30, -1.26836459122741e-30, 9.37339630957792e-312,  1.70257006040729e-313, -7.39330455649404e-287, -2.82116846727347e-277,  3.41641322410626e-312, 2.42759744242512e-301, NaN, -1.12858219058046e-276,  -2.30331110816477e-156, -2.30331110816477e-156, -2.30327665540415e-156,  -2.30331110816477e-156, NaN, 2.81199605989981e-312, NaN, -8.22918610319053e+303,  4.46108959687689e-140, 6.59211609310385e-306, -3.18469847225284e-248,  NaN, 7.51898017567052e-304, 1.21044018122494e-305, 5.85363771868791e+170,  2.10901416965392e-312, 5.85363771866079e+170, 7.51896959321261e-304,  -2.97578981950058e-288, 4.99776254202138e-316, 1.44804023176556e+190,  -6.56853904461718e-287, 3.7835305088198e+117, -1.97637754038728e+306,  Inf, 9.14021444806306e-322, 0, 0, 9.72926582174422e-309, -1.39067120301223e-309,  -2.29602087786811e-156, -2.30331110816477e-156, -2.30331110816477e-156,  -2.30331110763906e-156, -2.30331110816477e-156, -Inf, 0), thresholds = c(5.85363771174557e+170,  5.85363771868791e+170, 6.15509973953287e+170, NaN, NaN, NaN,  NaN, -7.40367110377773e-171, 9.69630022349236e+192, 3.60253364704011e-306,  2.7297489812681e-312, -2.30331099970595e-156, -2.30331110816477e-156,  -2.30331110816477e-156, 4.65661203714475e-10, -5.46354474764561e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46310509567581e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.46354690059085e-108, NaN, NaN, -9.7781740006482e-150, 7.2903536873204e-304,  NaN, NaN, 5.43230922486616e-312, NaN, NaN, NaN, NaN, NaN, NaN,  3.66343140689406e-305, NaN, -1.26836407059221e-30, -2.8214554825258e-277,  -1.26826829408497e-30, 2.40086640681612e-300, -8.01188945734414e-157,  -2.30331110816477e-156, -2.30331110816477e-156, -2.30331097358367e-156,  -2.30331110816477e-156, NaN, 7.73070854945038e-12, NaN, NaN,  NaN, NaN, NaN, 2.73737457034026e-312, -1.26418156348547e-30),      x = c(-1.40448124954558e+306, -6.05898824717554e-65, -2.25769487008466e-289,      8.74601785371863e-310, 3.652068166337e-306, -9.11378520770331e-306,      2.40060263696258e-300, 5.67865049360052e-270, -1.26836459270822e-30,      2.8435571614667e-312, -7.06373421489677e-304, 2.64121166339307e-301,      -1.40448124954558e+306, 0, 3.94108708470682e-312, 2.71598149214445e-306,      -1.26836459270255e-30, 3.66148293307183e-314, -1.757762757195e+307,      -1.23271668407508e-30, 2.33385326930198e-301, -2.97619001462835e-288,      -2.9718420926367e-147, 7.52609340439459e-304, NaN, -9.77818300079457e-150,      -9.77579636327222e-150, 3.65365168861588e-306, 0, 0, 9.23492568228087e-311,      5.79909433230408e-316, 6.95346190762455e-310, -6.56725888211742e-287,      6.96343570396394e-310, -1.09415610340935e-314, 1.26822404694409e-314,      1.6189543082926e-319, -9.11307071058342e-306, 1.38990724308225e-312,      1.59481413420777e-313, -3.47910835044854e-147, -9.77703147000341e-150,      NaN, -3.02879549134852e-288, 3.6520698692179e-306, NaN, NaN,      NaN, NaN, 3.66343200337381e-305, -2.11940810211077e-289,      -5.81608789291487e-34, 2.56647495438023e-301, -2.30331110816311e-156,      -2.30331110816477e-156, -6.05390363808932e-157, -2.30331110816477e-156,      -1.32083970011845e-284, 3.65207087186091e-306, NaN, NaN,      NaN, 1.3891799392362e-309, -4.98416699759381e-306, 3.66343140688495e-305,      -2.18053814606628e-289, NA, 8.89753371996806e-305, 2.87905598533622e-306,      -7.39330192498285e-287, NaN, 2.56647495437459e-301, -2.18103493600849e-289,      -3.12856511252087e-147, 7.52609340439459e-304, NaN, -9.77818300079457e-150,      -4.93230657291168e-31, 1.00891829368586e-309, -1.23259516440783e-30,      0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)