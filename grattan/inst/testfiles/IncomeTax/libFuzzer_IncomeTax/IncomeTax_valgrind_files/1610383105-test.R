testlist <- list(rates = c(NaN, NaN, -3.5659806447159e+304, 2.75744471483016e-10,  NaN, NaN, NaN, NaN, NaN, 1.03076958005949e+40, 3.27742461595324e+178,  3.13667399520311e+151, 3.5644358163573e-315, 1.67290190041334e+262,  4.87620583420803e-153, 7.01093828756137e-308, 3.56429106994503e-315,  1.13203791517163e-72, 1.14737330167401e+195, 5.95750278953851e+228,  5.95750278984877e+228, 5.90784496692506e+228, NaN, 6.17473461383151e-256,  5.95750442285959e+228, 5.95750319650678e+228, -5.18847371538636e+245,  -7.45564260949051e+307, 6.64033905201048e-07, 0, NA, 6.32404026676796e-322,  NaN, -6.3100779998114e-256, -5.06443593198239e+245, 1.3684555315667e-48,  -5.17538999909478e+245, NaN, -6.97063641475086e-258, -8.08634877215979e-174,  -4.82778918048755e+305, NaN, 6.55651547276648e-07, -5.48612405857659e+303,  NaN, NaN, -9.00181948337867e+241, 5.02982669403682e-10, 1.18495754800529e-303,  -1.29211778498328e+294, NaN, 1.390671161567e-309, NaN, 0), thresholds = c(NaN,  NA, 5.95745073761192e+228, -8.5233227686842e+245, 3.10503470425215e+231,  2.94664509246412e+229, 5.95750278984877e+228, -4.91772497097636e+245,  -7.20053783919336e+303, 6.36187793865144e+223, -Inf, 1.53044311702049e-94,  3.81435367146062e+228, -2.8084356235527e+307, NA, 0), x = NaN)
result <- do.call(grattan::IncomeTax,testlist)
str(result)