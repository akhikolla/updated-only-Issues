testlist <- list(rates = c(NaN, NaN, 3.04691492947206e-05, NaN, NaN, -1.1821097904989e-125,  4.77045810117177e-299, NaN, 6.80564992442599e+38, 1.51189165578349e-304,  1.42943185985413e-101, 3.94172293792919e-259, 1.42991535880131e-308,  -8.5243896509936e+245, 6.9645270215206e-308, NaN, -8.5243896509936e+245,  -8.64067982270303e+245, -6.31001569488506e-256, NaN, -5.81098240035476e+303,  -2.83637103419045e-124, 1.71272844748826e-260, 7.50966246834481e-308,  1.65249625247277e+40, NaN, 7.2911220195564e-304, -5.48612406879369e+303,  NaN, NaN, NaN, 2.75744471483016e-10, NA, NaN, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, -5.7502866102558e+243, 4.96474335111844e-14,  4.77072469916124e-299, 2.69703336328548e-307, 1.18495789628903e-303,  1.42991672770676e-308, 7.00659668223032e-308, -6.03473647567281e+304,  NaN, NaN, NaN, 4.46014903970603e+43, -1.37131755259308e+305,  -5.1749582645939e+245, NaN, NaN, 1.37437816244691e-309, 4.17415755274666e-309,  -1.13428637238403e-256, NaN, 2.12455196732528e+183, 1.02096057475982e+40,  -1.39067116124326e-309, NaN, NaN, NaN, 1.30375421369207e-309,  1.30078342585621e-311, 2.33589462432972e-310, 6.21370296905965e-313,  2.70150156837545e-307, NaN, -4.91619368412603e+245, NaN, 5.43230922486616e-312,  8.28891957765276e-317, 0, 4.14452302922905e-317, 0, 0, 5.31468269164389e+303,  1.39067116124826e-309, 0), thresholds = c(1.33283325263498e-105,  NA, NA, -Inf), x = c(NaN, NaN, NaN, NaN, NaN, NaN, NaN, -Inf,  -Inf, NaN, NaN, 5.54095540936847e-310, -1.1255454651159e-256,  NaN))
result <- do.call(grattan::IncomeTax,testlist)
str(result)