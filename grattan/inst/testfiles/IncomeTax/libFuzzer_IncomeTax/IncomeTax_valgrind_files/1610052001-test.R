testlist <- list(rates = c(6.07700744384733e-322, 1.26480805335359e-321,  NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 1.2104401812328e-305,  1.41497286004339e+190, 1.39067116156625e-309, NaN, 8.70018274290821e-313,  NaN, NaN, 1.00891829368621e-309, 2.67904644895999e+301, -1.27730694786056e-31,  3.78576961503532e-270, 1.09850957322306e-314, 6.95367949510419e-310,  -6.76385741726459e-231, -6.56793027847815e-287, 1.38999208669611e-309,  2.393494597516e-301, NaN, -3.67206769527446e-306, -7.70372690916868e-34 ), thresholds = c(Inf, NA, 2.8480945455619e-306, NaN, -2.30331110815694e-156,  -2.30331110816477e-156, -2.29449120144681e-156, -2.30331110816477e-156,  -1.84314079543842e+306, 7.1987099133561e-310, NaN, NaN, 7.37827237216662e-301,  -3.04032340328041e-288, 2.72775927691739e-312, -5.48612407015086e+303,  0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)