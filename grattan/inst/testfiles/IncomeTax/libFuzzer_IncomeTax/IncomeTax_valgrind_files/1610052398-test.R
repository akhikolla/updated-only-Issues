testlist <- list(rates = c(NaN, NaN, NaN, 1.3854086120054e-309, 1.38526007229957e-309,  -4.98416699759381e-306, Inf, -7.39330276865421e-287, -7.39330507484462e-287,  -2.25739033689687e-277, -2.11940804072442e-289, 2.72810281967378e-312,  -2.83427023367766e+306, 534.645996101197, -2.30331110816477e-156,  -1.48508910633323e-267, NaN, NaN, NaN, -7.3933069341805e-287,  9.70418706714725e-101, 9.69721082575941e-101, 2.56656752159334e-301,  -6.65611003165837e-287, NaN, 0), thresholds = c(-9.77719780333789e-292,  -7.39330276865405e-287, -2.25704522481571e-277, -1.48508910633323e-267,  NaN, -3.07840260097373e-288, NaN, NaN, NaN, 0, 0, 0, 9.6439561139442e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  -Inf, 9.70418706716128e-101, -1.31312277463458e-284, NaN, -7.36331510668791e+303,  NaN, 7.1987099133561e-310, -4.2589878701453e-270, -2.18053517566054e-289,  -9.77719780333789e-292, 1.10299898209903e+217, -6.64678428260256e-287,  5.85363593013149e+170, 5.85363771868791e+170, 3.75990818875158e+175,  NaN, NaN, -9.77719780333789e-292, NaN, NaN, NaN, NaN, NaN, -1.26836479922652e-30,  -8.81442569611088e-280, -3.79844687780135e-33, 3.66343140688495e-305,  7.17065483396996e-310, NaN, -5.02570917414969e+306, 6.37328271834745e+40,  6.66964410955689e+279, -9.77719780333789e-292, 2.60187727435827e-259,  4.53801977905039e+279, -1.06597124722923e-314, 3.60253364408064e-306,  4.65604443888978e-10, 8.74601828022446e-310, 0, 0, -9.37438000463309e-287,  7.29112201955619e-304, -2.11966640218428e-289, -5.81608789291487e-34,  -1.26836459270829e-30, -8.81443176193936e-280, 1.91697470586404e-321,  -2.87284972623436e-188, 2.36726998478986e-306, -5.80059724057191e-275,  7.31960296499841e-304, NaN, 4.65661065266522e-10, 1.05642027128138e-93,  0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)