testlist <- list(rates = c(0, 0, 9.70418706357123e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 7.94033183288707e-310,  9.70418706716128e-101, -2.96164487932264e-277, NaN, 2.74711394303795e-282,  -6.36390391980068e+305, 3.65207087186091e-306, -9.77719778799577e-292,  4.46078843844753e-99, 8.63073241202155e+115, -2.82116926034698e-277,  6.98403937286746e-310, -5.65756544598341e+303, 3.65207087186091e-306,  NaN, NaN, 1.39067049844331e-309, 0, 0, 0, 9.70418614810987e-101,  9.70418706716128e-101, 9.70418706716128e-101), thresholds = c(534.646484374069,  -1.25735540571532e-30, NaN, -1.23414719310911e-30, 2.56680426183462e-301,  -4.9540049074147e-33, -1.26836459270829e-30, -5.48612406879423e+303,  3.78622912549433e-270, -1.26836459270033e-30, -1.24351955275956e-30,  -1.26836459270829e-30, 5.20542961913381e-270, 4.00791842552789e-306,  2.34012289634757e-269, -1.26836459270829e-30, 3.94108708470682e-312,  3.5938582476726e-306, NaN, 3.78576699573368e-270, 7.29112072938316e-304,  NaN), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)