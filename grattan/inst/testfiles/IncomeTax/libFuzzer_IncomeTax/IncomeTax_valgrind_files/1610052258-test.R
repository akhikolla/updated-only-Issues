testlist <- list(rates = c(-Inf, NaN, -2.30331110816477e-156, -2.30331110816477e-156,  -2.30331110763906e-156, -2.30331110816477e-156, -9.77719780333789e-292,  NaN, 3.41641322410626e-312, 7.19870908769578e-310, 9.65444228779875e-101,  1.95128366347825e-187, 2.34505333126984e-310, 9.70418706714725e-101,  9.70418706716127e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716127e-101, 9.76721945630585e-101,  9.70418706716128e-101, 4.95224444622419e-303, 9.70395180102152e-101,  2.71973287984693e-312, -2.30331110773024e-156, -2.30331110816477e-156,  -1.12583501772562e-305, -2.30331110816477e-156, 9.7048217683398e-101,  9.70418706716128e-101, 7.91826926828272e-101, NA, NaN, 7.2911220195564e-304,  9.70418706714725e-101, 7.19919233962061e-310, -2.82138099009611e-277,  NaN, NaN, NA, NaN, 6.95335581431077e-310, NaN, -7.40367110377773e-171,  9.69630022349236e+192, 3.60253364704011e-306, 9.50582302598558e-321,  0, 3.60739284464096e-313, 2.26527122355628e-318, 2.08964957151527e-309,  -9.77703287175481e-150, -8.37606606940626e-157, 0), thresholds = c(4.28183424758689e-317,  -7.39330388852429e-287, 2.12199579096527e-314, 0, 0, 2.3641409746639e-308,  1.48456814906984e-313, 2.84844220667961e-306, -2.05226840465102e-289,  2.87903833578224e-306, 0, 3.24665356017687e-312, 0, -2.29844981641981e-185,  3.55816254229689e-310, 4.08272418357189e-311, 3.60289283426669e-306,  -3.01363922187978e-135, -2.30331110816476e-156, -2.30331110816477e-156,  -2.29449120144681e-156, -6.56793027847815e-287, 9.36320982834007e-97,  -1.41042199454284e-231, 8.28898281805543e-317, 0, 0, 0, -5.48612407015086e+303,  2.96439387504748e-323, NaN, 9.70418895844636e-101, 9.70418706716128e-101,  9.70418706716128e-101, -2.18061966514023e-289, 9.70418706714742e-101,  -2.30880194572342e-289, 9.70418614815292e-101, 9.7041889619534e-101,  9.67907259811454e-101, 3.57826741138282e-315, -7.2783911067738e-308,  -2.35343736497682e-185, 7036874417766.4, -2.35343736826454e-185,  -3.53472032472671e-147, -2.84809453891061e-306, 9.70418744682925e-101,  NaN, 7.07039469279248e-304, 1.39348334607445e-309, -5.96890298684753e+306,  1.390652843099e-309, 6.06620996733647e-301, -6.64677928231362e-287,  NaN, NaN, NaN, NaN), x = c(4.00791570941472e-306, 2.34012289634757e-269,  -1.26836459270829e-30, 3.94108708470682e-312, 4.91407572666621e-319,  2.72888639290682e-312, 3.63041237940668e+282, 2.71984550446759e-312,  7.19919233907545e-310, -7.55234771438901e-287, 3.7835305088198e+117,  3.17539900558472e-277, NA, 0, 3.65190389201212e-306, -1.46166810125811e-52,  8.15801194413066e-320, -Inf, NA, 3.1995726634364e-314, -1.36890628235454e-231,  NaN, 7.73071190387239e-12, 6.98327594525623e-310, -6.05898824717554e-65,  -2.25769487008466e-289, 8.74601785371863e-310, 3.652068166337e-306,  NaN, Inf, 7.74565138159227e-304, -5.90896719776808e-306, -1.06099789548264e-314,  -7.06373421489677e-304, 4.03016916411296e-306, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)