testlist <- list(rates = c(NaN, NaN, 7.2902354666451e-304, 0, 0, 0, Inf,  -5.48612406879369e+303, Inf, 1.42873559907201e-101, -1.41042199454284e-231,  -1.74162172546386e-248, 7.20047258077813e-310, 2.62066480202492e-312,  -2.27610605023629e-159, -1.12583501772562e-305, -2.30331110816477e-156,  -6.36358120662016e+305, -6.64678428260241e-287, NaN, NaN, NaN,  -9.77818300079457e-150, 8.37292631679306e+115, -2.18103493738225e-289,  0), thresholds = c(-2.16408455822196e-243, 5.26059814830126e-306,  -2.16392750841357e-243, 534.645996101188, NA, -2.2489446651853e-289,  -4.95400484443369e-33, -1.26836459270829e-30, 2.1788294981599e-321,  3.6634314009933e-305, -9.77941371393343e-150, 2.33246235504083e-12,  -2.15995069167566e-277, NA, 7.29111937478047e-304, -3.04032340824977e-288,  7.84460841917251e+168, 2.81218450794511e-312, 7.17630820845743e-304,  -3.01441880984572e-305, -6.75197064217763e-287, -2.96004356739545e-306,  -3.18471904527818e-248, 6.68177101606839e-310, 1.390671161567e-309,  0, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  -1.26841746137343e-30, -8.81442566349554e-280, -3.79844687780135e-33,  -1.26836459270829e-30, 2.1788294981599e-321, -Inf, -9.77580566742013e-150,  -Inf, 3.00089887426119e+284, 0, 4.94065645841247e-324, NaN, NaN,  NaN, 2.73737457034026e-312, NaN, 1.42891481127931e-101, 9.70418706716128e-101,  1.95128366347825e-187, 2.34505333126984e-310, -2.20216447500529e-289,  7.84460841922937e+168, 5.85363771868791e+170, -9.77579998268762e-150,  5.8536377186878e+170, 9.69630018960263e+192, 3.60253364836636e-306,  2.56647495436133e-301, -2.30331110816311e-156, -2.30331110816477e-156,  -3.07840259866455e-288, -5.46354689218091e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -5.46354690059085e-108, -5.46354690059085e-108,  -5.4635451747904e-108, 7.19919234122054e-310, 5.85363771174557e+170,  5.85363771868791e+170, 6.15509973953287e+170, NaN, NaN, NaN,  NaN, -7.40367110377773e-171, 9.69630022349236e+192, 3.60253364704011e-306,  -5.48612930069182e+303, -2.87284973051533e-188, -2.35343736826454e-185,  -2.353436891546e-185, 0), x = 8.74601868093615e-310)
result <- do.call(grattan::IncomeTax,testlist)
str(result)