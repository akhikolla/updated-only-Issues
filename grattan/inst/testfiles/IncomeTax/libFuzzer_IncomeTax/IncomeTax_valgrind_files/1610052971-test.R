testlist <- list(rates = c(8.81950571114775e-312, -2.95250654929576e-135,  -1.26836459245897e-30, NaN, 3.6634314009942e-305, 2.93988297347438e-306,  3.83698199955456e+117, 2.92277519934832e-306, 2.84809454419421e-306,  -1.26836459270829e-30, -1.26836421360307e-30, 2.39958945525286e-309,  4.35857935464267e-311, 3.56048353890995e-306, -1.23416654681114e-30,  -1.26836459270829e-30, -7.2239847844844e-287, -2.30329041034134e-156,  -5.48679702396386e+303, 1.39066109167247e-309, -9.77719780333789e-292,  -9.77719780333789e-292), thresholds = c(-5.46354690059085e-108,  -5.35044484234063e-108, -5.46354690059085e-108, -5.46354690059085e-108,  NaN, -5.46354690059085e-108, -5.46354690059072e-108, -Inf, NaN,  Inf, NaN, NaN, NaN, 1.390671161567e-309, NaN, NaN, 1.25986739689518e-321,  0, -8.81442986644817e-280, -5.46354690059072e-108, 9.70418895840706e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, -1.34481107682851e-284, 0), x = c(9.70418614815292e-101,  NaN, -1.23414719310911e-30, 2.56680426183462e-301, -4.9540049074147e-33,  7.00767867254124e-310, -6.76385741726459e-231, 534.646484374069,  -4.71895155913674e-33, 9.90308928476187e-101, 9.70418696071228e-101,  7.55652533908718e-308, -1.26825734434917e-30, 1.96450957876641e-101,  9.70418704587148e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 2.71931842754401e-312, 7.14190420369699e-304,  2.72505724091204e-312, -1.23269146090507e-30, -1.26836459270033e-30,  3.66343140688495e-305, -5.46300067029114e-108, -5.46354690059085e-108,  -5.46354690059085e-108, -9.77719894263684e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -9.77719780333789e-292, -9.77719780333926e-292,  -2.82126001103731e-277, -1.39408757479111e-309, -1.24267801634966e-267,  NaN, -2.27269149500954e-156, -2.30331110816477e-156, -2.33044755850737e-156,  NaN, 4.65661287305794e-10, NaN, NaN, NaN, 1.25986739689518e-321,  -2.30341821896943e-156, -7.36331509899379e+303, 5.43230922486616e-312,  0, 0, 1.24775706722174e-305, 1.55291925375021e+277, 9.70419158727782e-101,  9.70418706716128e-101, 9.70418706716128e-101, 7.10169581022479e-304,  NaN, -2.30331099048463e-156, -1.93132946644792e+306, NaN, NaN,  NaN, -2.27610608310083e-159))
result <- do.call(grattan::IncomeTax,testlist)
str(result)