testlist <- list(rates = numeric(0), thresholds = c(NaN, NA, 2.81218450810321e-312,  7.55038392918931e-15, 3.60253364406077e-306, -2.35322190463892e-185,  -2.60151710544707e-312, 7.31960296499841e-304, NaN, 6.98147805439749e-310,  -2.67120456398365e+305, 1.39066109167247e-309, 0, 0, Inf, 9.23492568228087e-311,  NaN, 1.44804023176556e+190, -1.75590191507535e+306, 2.29775642758296e+189,  4.36428616530596e-306, 3.90913259233617e+304, 3.65784678046935e-306,  5.98449074221497e-308, 6.07700744384733e-322, 1.26480805335359e-321,  NaN, NaN, NaN, NaN, 3.65226166050248e-306, NaN, NaN, -9.77817400064824e-150,  -2.67663058734646e+304, -2.82149851225675e-277, 3.41641322410626e-312,  7.19870908769578e-310, NaN, -5.16216865680205e-306, -8.81442986644817e-280,  -1.85907762421774e-183, -9.77580118946814e-150, -2.97619079749159e-288,  -2.11852534546505e-289, 2.78134232313277e-309, 8.44254251528635e-227,  3.8004944616188e-311, NaN, 0), x = c(9.70418706715965e-101, NaN,  9.25491658026984e-306, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 2.8518042691927e-139,  9.70418706715867e-101, 9.70418706716128e-101, 9.7041598162183e-101,  2.00878954280366e-139, NaN, -3.01363922187462e-135, -2.30331110816476e-156,  -2.30331110816477e-156, -2.29449120144681e-156, -2.30331110816477e-156,  -1.84314079543842e+306, 7.1987099133561e-310, NaN, -1.03867836358987e-149,  7.2903536873204e-304, -4.57615391491265e-246, -3.18993387177142e-248,  5.84082107599125e-308, 6.07700744384733e-322, 1.26480805335359e-321,  NaN, NaN, 2.73737457034026e-312, -2.35343736826454e-185, -2.35331532831998e-185,  -3.59749306165713e-147, 2.98474894658139e+289, NaN, -4.4942339086644e+306,  NaN, NaN, NaN, NaN, -8.81442566346712e-280, -2.30331110816477e-156,  -2.30331110816477e-156, Inf, 7.37827237216662e-301, 1.21044018122494e-305,  -6.64550663505903e-287, 1.84870553760557e-272, -8.11440248256909e-289,  -Inf, 5.4169641229678e-307, NaN, -5.66897118401227e+303, -6.14617337082043e+305,  3.65207087186091e-306, -7.3933019237596e-287, 0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)