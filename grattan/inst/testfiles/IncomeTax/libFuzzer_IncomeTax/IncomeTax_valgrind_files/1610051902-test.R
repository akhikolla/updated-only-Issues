testlist <- list(rates = c(7.74565138159227e-304, 2.12198042552369e-314,  0, 0, 0, 1.40913782993788e-315, 8.84871571701673e-321, -5.35532635250002e+305,  1.38803996951476e-309, -6.69969684636807e-287, 2.89689873904097e-312,  -3.18411881987467e-248, 1.80354409094537e-130, 1.55571390562492e-319,  3.23790861658519e-319, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN,  NaN, NaN, NaN, NaN, NaN, 1.00891829368621e-309, 2.67904644895999e+301,  -1.26836459117002e-30, 5.67865050383217e-270, -2.08934551532475e-289,  3.60289283426677e-306, 9.64467835421752e-101, -8.81442987198527e-280,  -2.3033111077411e-156, -2.30331110816477e-156, -1.12583501772562e-305,  -2.30331110816477e-156, -6.36358120662016e+305, -6.64678428260241e-287,  NaN, NaN, -2.60644468696874e+304, -5.66324542991478e+303, 5.85363771174007e+170,  5.85363771868791e+170, 5.85318274554714e+170, 5.39907627431893e-310,  1.08601191821704e-306, -2.26003441595648e-156, -2.30331110816477e-156,  -8.81442988692257e-280, 2.95908645738404e-306, -3.01406959776519e-135,  -8.47794417983927e+303, 7.334923554234e-270, 3.56011975004636e-305,  -3.9759940224262e-34, -1.26836459270827e-30, 1.43026673502722e-316 ), thresholds = c(2.39958945525286e-309, 7.19919233907466e-310,  7.51896958273426e-304, 5.68604456978674e-270, -1.26836459270829e-30,  -3.66343031191117e-305, 2.64121103063769e-301, 1.24660111018731e-266,  1.96568260790928e-236, -3.85254213647597e-34, 3.56048353890995e-306,  -1.26836459270255e-30, NaN, -1.2341419504043e-30, 3.66343140688495e-305,  -1.26836459270251e-30, 3.66148293307183e-314, Inf, 1.23269447171475e-30,  -1.26836407088752e-30, -1.26836459270829e-30, 2.11057945361079e-309,  9.70418706357123e-101, 9.70418706716095e-101, Inf, 0), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)