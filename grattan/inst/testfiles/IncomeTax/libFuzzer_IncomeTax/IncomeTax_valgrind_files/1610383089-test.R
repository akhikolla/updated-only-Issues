testlist <- list(rates = c(NaN, 1.65781316445591e+40, NaN, 2.12199579047121e-314,  0, 0, 0, 0, 4.14452302922905e-317, 0, 1.3684555315672e-48, 3.94171798504617e-259,  -4.42390034116555e+279, 1.3684555315672e-48, -Inf, -5.17539168553204e+245,  -6.03468184974396e+304, NA, NaN, NaN, 7.2911220195564e-304, NaN,  NaN, -5.75028661567098e+243, -5.17495827120738e+245, NaN, 9.36270038563636e-307,  1.08729903862711e-311, 2.33589462432972e-310, -2.83637110534792e-124,  1.02096057281305e+40, -1.39067116124326e-309, NaN, -2.83637103419045e-124,  1.71272844748826e-260, 7.50963276040374e-308, 1.65249625247277e+40,  -1.93372419505209e+242, 1.390671161567e-309, NaN, NaN, NaN, -Inf,  NaN, 1.70141183460469e+40, 2.12862023884205e-106, 0), thresholds = Inf,      x = c(NaN, NaN, NaN, 1.390671161567e-309, 0, 2.84809453888922e-306,      0, NaN, -5.06443593276214e+245, -5.17538999909498e+245, -8.4053447558216e+241,      -6.31001569488506e-256, NaN, -2.42479044734714e+260, 7.56881123708566e-304,      2.05211769658305e-289, NaN, 3.94212982856942e-259, NaN, 2.12455197126707e+183,      NaN, 4.77024164452671e-299, 2.69703506088201e-307, -5.83039854585569e+303,      1.37437816244691e-309, 2.70150095835327e-307, 2.12199579047121e-314,      NaN, NaN, NaN, -8.73989987746428e+245, NaN, NaN, NaN, NaN,      NaN, NaN, NaN, NaN, -8.73989987746428e+245, NaN, NaN, -5.06443593276239e+245,      -8.00197165336822e+304, -6.17182154143209e+303, 3.62557269002036e+53,      5.45435836126695e-312, NaN, NaN, -6.3100779998114e-256, 4.65661275987818e-10,      -8.7777985100699e+304, 1.19787461677606e+142, NaN, -5.50078902973508e+303,      5.95750278987369e+228, NaN, 4.7282819493278e-308, 6.55651541948862e-07,      1.58653735272582e+124, -3.3660338951184e+304, 9.96833088362618e-306,      NaN, NaN, 2.70150095835327e-307, NaN, NaN, 2.70150095835327e-307,      NaN, 6.99830926169978e-126, NaN, 1.36845553142777e-48, -5.7502851316102e+243,      Inf, 1.70114806571822e+40, -3.31521377423868e+118, 6.55651094312864e-07,      NaN, NaN, NaN, NaN, -5.48633958130682e+303, -5.18847371542227e+245,      -5.17539168553194e+245, NaN, 1.31756732478297e-309, NaN,      0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)