testlist <- list(rates = c(3.52953696534134e+30, 3.52953696534134e+30, 3.52953696534134e+30,  3.52953696534134e+30, 3.52953696534134e+30, 3.52953696534134e+30,  3.52953696534134e+30, 3.52953696534134e+30, NaN, 1.39065217937453e-309,  NaN, NaN, NaN, NaN, 7.29032584869847e-304, 7.29023199001299e-304,  NaN, NaN, 1.75463786837078e-130, -1.93267624034704e-12, 9.11767501288655e-312,  NaN, 1.04700904156605e+299, -5.48745941505172e+303, 2.84132113906602e-173,  2.93095010751456e-173, 2.84132113906601e-173, 1.23239822953881e-27,  NaN, 1.39065217937453e-309, 8.0516306380649e+115, -5.56380914473936e+303,  NaN, 1.23185834400019e+194, 2.54639250802938e-313, -2.70494423915142e-11,  -1.85133771268567e+304, 5.16396100852046e+120, 2.7747859236045e+180,  NaN, -1.37153163764918e+305, 7.97859330059204e-29, -2.70494424244939e-11,  NaN, 6.94766386940816e-313, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,  0, 0), thresholds = c(5.85323248952847e+43, 1.53661465187051e-110,  3.32663950965668e-111, -3.56556627304931e+304, NaN, NaN, 3.52998360417062e+30,  3.52953696534134e+30, 3.52953696534134e+30, 3.52953696534134e+30 ), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)