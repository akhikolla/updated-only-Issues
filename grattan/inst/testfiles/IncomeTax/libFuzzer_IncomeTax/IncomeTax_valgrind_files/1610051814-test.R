testlist <- list(rates = c(-3.97599402242619e-34, Inf, -1.26836459270829e-30,  2.39422219319154e-301, NA, -2.35322190464904e-185, -2.60151710544707e-312,  7.31960296499841e-304, 3.9191047797502e+202, 6.98147805439749e-310,  -2.67120456398365e+305, -8.01188945734414e-157, -2.30331110816477e-156,  -2.30331110816477e-156, -2.30331097358367e-156, -2.30331110816477e-156,  5.79910218794785e-316, 1.44804023176556e+190, -1.75590191507535e+306,  2.29775642758296e+189, NA, 3.90913259233617e+304, 3.65784678046935e-306,  -3.01363922187462e-135, -2.30331110816476e-156, -2.30331110816477e-156,  -2.29449120144681e-156, -2.30331110816477e-156, -1.84314079543842e+306,  0), thresholds = c(-5.48612408923094e+303, 7.2911220195564e-304,  0, 0, -5.48612407015086e+303), x = NaN)
result <- do.call(grattan::IncomeTax,testlist)
str(result)