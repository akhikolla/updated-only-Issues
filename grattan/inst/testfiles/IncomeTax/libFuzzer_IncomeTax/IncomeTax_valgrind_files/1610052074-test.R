testlist <- list(rates = c(1.37887441946077e-137, -1.40444775900542e+306,  NaN, -2.30880195073034e-289, 1.38523885250975e-309, 8.80034094427853e-310,  8.5451750570825e+194, 1.0451773909944e-308, NaN, -1.26836479922652e-30,  2.1788294981599e-321, 3.6634314009933e-305, 3.9410870837928e-312,  -1.26822486837899e-30, -2.24767481577173e-289, -1.87537486427837e-32,  -1.26836459270827e-30, 1.43026673502722e-316, -1.26823091051179e-30,  -2.24767481577168e-289, -2.11866822074853e-289, 1.24351972100497e-13,  9.70418706674546e-101, 3.83687416993436e+117, NaN, NaN, NaN,  NaN, NaN, -8.81442989928447e-280, 7.74565138159227e-304, -5.90896719776808e-306,  -1.06099789548264e-314, -1.26836459270225e-30, 1.11688277665699e-308,  6.23735309290007e+291, 1.25986739689518e-321, 5.59610256518376e-275,  -5.48612406879369e+303, NaN, 2.33316082294921e-301, 2.12628684398374e-314,  NaN, NaN, -1.40444776161118e+306, NaN, NaN, 2.84915433785708e-306,  1.86165783044538e-130, -2.11940804072449e-289, 7.26263955508388e-304,  2.38021046299084e-301, -9.77579638205135e-150, 2.71628105277197e-312,  -5.74764672273257e-306, 3.65190389201212e-306, 1.42908288084546e-101,  -2.2469318707895e-289, 34082833.0666666, NaN, 2.80614289249855e-312,  -2.2308331518689e-289, 3.83677275828159e+117, -1.26823091051182e-30 ), thresholds = c(1.0451773909944e-308, -2.60644468696874e+304,  -5.66324542991478e+303), x = numeric(0))
result <- do.call(grattan::IncomeTax,testlist)
str(result)