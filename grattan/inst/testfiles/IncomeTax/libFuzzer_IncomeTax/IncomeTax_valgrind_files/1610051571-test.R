testlist <- list(rates = c(-1.26836459270228e-30, 3.66148293307183e-314,  3.78322756561489e+117, 1.09850405105134e-314, 6.95367949510419e-310,  -6.76385741726459e-231, -6.56793027847815e-287, 1.38999208669611e-309,  2.393494597516e-301, 5.98915713555518e-308, 5.19316029923539e-310,  2.80609076216982e-312, -2.29844981641981e-185, 1.09375730588782e-303,  -3.40708621819931e-291, -9.77719780333789e-292, -9.77719780333789e-292,  -9.77719780333789e-292, -7.39330276865421e-287, -2.25704522481571e-277,  -1.48508910633323e-267, NaN, -3.07840260097373e-288, NaN, NaN,  NaN, -5.78534238678543e-34, -1.26836459270829e-30, -1.26836459122741e-30,  9.37339630957792e-312, 1.70257006040729e-313, -3.9759940224262e-34,  -1.26823100659151e-30, -1.26836459270829e-30, -5.55041458528278e+303,  4.35481367226539e-317, 3.6634314009933e-305, -9.77941371393343e-150 ), thresholds = c(9.36931874903936e-312, 1.70257006040729e-313,  -3.9759940224262e-34, -1.26823100659151e-30, -3.66343140688495e-305,  1.26822404694409e-314, -1.26206189255696e-30, -9.08459195679202e-306,  2.39422219319899e-301, 1.88100416372243e-35, -1.26836459270829e-30,  5.5869437297374e-319, -2.247674815751e-289, -1.24371214513728e-30,  -1.26836459270033e-30, 3.66343140688495e-305, 7.29023726646163e-304,  1.09614956738224e-314, -2.8213831420555e-277, 6.52166652510445e-322,  0, 8.44254251528635e-227, 1.42891481127923e-101, 9.70418706716128e-101,  9.70418706674546e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.70418706716128e-101,  9.70418706716128e-101, 9.70418706716128e-101, 9.7041598162183e-101,  5.35249213585531e+116, 9.70418706717595e-101, 9.70418706716128e-101,  -1.34481107682851e-284, NaN, 2.84809456010918e-306, -6.20660465394611e-145,  7.52609340439459e-304, 9.7294232517642e-101, -1.03847994247802e-149,  NaN, NaN, NaN, NaN, -3.47306054607043e-164, 7.20267746058957e-304,  2.71502979554261e-307, 6.65988421811998e-310, 2.22507386265735e-308,  -5.08189404593326e-306, 3.00089887426119e+284, NaN, 8.63073241202193e+115,  -2.82116785652972e-277, NaN, NaN, 2.81218450871091e-312, 7.55038392918931e-15,  -7.37031237193649e-157, 3.60296720622498e-306), x = c(NaN, 3.02610044226432e-306,  -2.35343736825169e-185, -5.34349793087407e-187, NA))
result <- do.call(grattan::IncomeTax,testlist)
str(result)